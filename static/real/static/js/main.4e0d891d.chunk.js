(this["webpackJsonpreact-front-chatting"]=this["webpackJsonpreact-front-chatting"]||[]).push([[0],{179:function(e){e.exports=JSON.parse('{"emoji":["\ud83d\ude02","\ud83e\udd23","\ud83d\ude03","\ud83d\ude04","\ud83d\ude05","\ud83d\ude06","\ud83d\ude09","\ud83d\ude0a","\ud83d\ude0b","\ud83d\ude0e","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude19","\ud83d\ude1a","\ud83d\ude42","\ud83e\udd17","\ud83e\udd29","\ud83e\udd14","\ud83e\udd28","\ud83d\ude10","\ud83d\ude11","\ud83d\ude36","\ud83d\ude44","\ud83d\ude0f","\ud83d\ude23","\ud83d\ude25","\ud83d\ude2e","\ud83e\udd10","\ud83d\ude2f","\ud83d\ude2a","\ud83d\ude2b","\ud83d\ude34","\ud83d\ude0c","\ud83d\ude1b","\ud83d\ude1c","\ud83d\ude1d","\ud83e\udd24","\ud83d\ude12","\ud83d\ude13","\ud83d\ude14","\ud83d\ude15","\ud83d\ude43","\ud83e\udd11","\ud83d\ude32","\u2639","\ud83d\ude41","\ud83d\ude16","\ud83d\ude1e","\ud83d\ude1f","\ud83d\ude24","\ud83d\ude22","\ud83d\ude2d","\ud83d\ude26","\ud83d\ude27","\ud83d\ude28","\ud83d\ude29","\ud83e\udd2f","\ud83d\ude2c","\ud83d\ude30","\ud83d\ude31","\ud83d\ude33","\ud83e\udd2a","\ud83d\ude35","\ud83d\ude21","\ud83d\ude20","\ud83e\udd2c","\ud83d\ude37","\ud83e\udd12","\ud83e\udd15","\ud83e\udd22","\ud83e\udd2e","\ud83e\udd27","\ud83d\ude07","\ud83e\udd20","\ud83e\udd21","\ud83e\udd25","\ud83e\udd2b","\ud83e\udd2d","\ud83e\uddd0","\ud83e\udd13","\ud83d\ude08","\ud83d\udc7f","\ud83d\udc79","\ud83d\udc7a","\ud83d\udc80","\ud83d\udc7b","\ud83d\udc7d","\ud83c\udf0a","\ud83d\ude02"]}')},256:function(e,t,i){},274:function(e,t){},276:function(e,t){},286:function(e,t){},288:function(e,t){},315:function(e,t){},316:function(e,t){},321:function(e,t){},323:function(e,t){},330:function(e,t){},349:function(e,t){},371:function(e,t,i){"use strict";i.r(t);var s=i(1),n=i.n(s),c=i(40),o=i.n(c),r=i(18),a=i(7),l=i(3),u=i(2),d="TYPE_INSERT_USER_BY_TOPIC_ID",f="TYPE_INSERT_ALL_FRIENDS",j="TYPE_INSERT_MESSAGE_BY_TOPIC_ID",p="TYPE_UPDATE_MESSAGE_BY_TOPIC_ID",O="TYPE_INSERT_MESSAGES_BY_TOPIC_ID",h="TYPE_INSERT_MY_TOPIC",m="TYPE_INSERT_ALL_TOPIC",b="TYPE_INSERT_USER_CHANGE_INFO",g="TYPE_ADD_SEND_MESSAGE_IN_TRACE",_="TYPE_UPDATE_SEND_MESSAGE_IN_TRACE",S="TYPE_DELETE_MY_TOPIC_BY_TOPIC_ID",v="TYPE_DELETE_USER_BY_TOPIC_ID",x="TYPE_DROP_MY_TOPICS",w="TYPE_DELETE_ALL_FRIENDS",E="TYPE_RESET",N="TYPE_UPDATE_PROFILE",y="TYPE_UPDATE_IS_WRITE_LOG",T="TYPE_UPDATE_WEBSOCKET_STATUS",I="TYPE_SESSION_UPDATE_LOGIN",A="TYPE_SESSION_UPDATE_JWT",C="TYPE_SESSION_UPDATE_USER",L="TYPE_LOGGING_RAW",R="TYPE_LOGGING_STATUS",k="topic",M="user",D="message",q="session",U="invite",P="join",F="create",W="leave",Y="login",G="logout",V="select",B="send",H="ctrl",J="register",K="token",Z="fail",X="done",z="send",Q="done",$="\ucc44\ud305\ubc29\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",ee="TYPE_SELECT_TOPIC_ID",te="TYPE_INSERT_NEW_USER_BY_TOPIC_ID",ie="TYPE_UPDATE_MESSAGE_ADD_FILE",se="TYPE_ADD_REPLY",ne="TYPE_ADD_MENTION",ce="HIDE_LOGIN",oe="HIDE_SIGNUP",re="GET_PROFILE_IMG",ae="GET_REPLY_CONTENT",le="TYPE_ADD_PROFILE_IMG",ue="IS_SHOW_POPUP_MSG_ITEMS",de="IS_SHOW_CHATBOX_LOADING",fe="GET_IMAGE_BLOB",je="GET_TOPIC_USERS",pe="GET_ALL_TOPICS",Oe="IS_SHOW_CHAT_MEBMER",he="IS_SHOW_INVITE",me="IS_SHOW_CHAT_MOBILE",be="IS_SHOW_CREATE_TOPIC",ge="IS_SHOW_POPUP_NOTIFY",_e="TEMP_SAVE_MENTION_USERS",Se="TEMP_SAVE_MSG_FOR_REALY",ve="TEMP_SAVE_MSG_FOR_MENTION",xe="GET_TOAST_MSG",we="localhost"===document.location.host.split(":")[0]?"ws://":"wss://",Ee={DEFAULT_USE_LOGGER:!0,DEFAULT_CHAT_SERVER_URL:"https://"+document.location.host,DEFAULT_WEBSOCKET_SERVER_URL:we+document.location.host+"/ws",DEFAULT_NEXT_RAW_LOG_ID:1,DEFAULT_NEXT_STATUS_LOG_ID:1,DEFAULT_RAW_LOG:[],DEFAULT_STATUS_LOG:[],WEBSOCKET_STATUS:"NOT CONNECTED",SESSION_JWT_TOKEN:null,SESSION_IS_LOGIN:!1,SESSION_LOGIN_COUNT:0,SESSION_USER_INFO:{id:null,name:null},SEND_MESSAGE_TRACE:[],FRIENDS_ALL:[],TOPICS_ALL:[],TOPICS_MY:[],REPLY:[],MENTION:[]},Ne=function(e,t){switch(t.type){case _:return Object(u.a)(Object(u.a)({},e),{},{SEND_MESSAGE_TRACE:Object(l.a)(e.SEND_MESSAGE_TRACE.map((function(e){return e.uuid===t.message.uuid?(e.result=t.message.result,e.status=t.message.status,e):e})))});case g:return Object(u.a)(Object(u.a)({},e),{},{SEND_MESSAGE_TRACE:[].concat(Object(l.a)(e.SEND_MESSAGE_TRACE),[t.message])});case E:return Object(u.a)(Object(u.a)({},e),{},{SESSION_JWT_TOKEN:null,SESSION_IS_LOGIN:!1,SESSION_USER_INFO:{id:null,name:null},FRIENDS_ALL:[],TOPICS_ALL:[],TOPICS_MY:[]});case R:return Object(u.a)(Object(u.a)({},e),{},{DEFAULT_NEXT_STATUS_LOG_ID:e.DEFAULT_NEXT_STATUS_LOG_ID+1,DEFAULT_STATUS_LOG:[].concat(Object(l.a)(e.DEFAULT_STATUS_LOG),[{id:e.DEFAULT_NEXT_STATUS_LOG_ID,text:t.log}])});case L:return Object(u.a)(Object(u.a)({},e),{},{DEFAULT_NEXT_RAW_LOG_ID:e.DEFAULT_NEXT_RAW_LOG_ID+1,DEFAULT_RAW_LOG:[].concat(Object(l.a)(e.DEFAULT_RAW_LOG),[{id:e.DEFAULT_NEXT_RAW_LOG_ID,text:t.log}])});case I:return Object(u.a)(Object(u.a)({},e),{},{SESSION_IS_LOGIN:t.isLogin,SESSION_LOGIN_COUNT:e.SESSION_LOGIN_COUNT+1});case A:return Object(u.a)(Object(u.a)({},e),{},{SESSION_JWT_TOKEN:t.token});case C:return Object(u.a)(Object(u.a)({},e),{},{SESSION_USER_INFO:t.user});case f:return Object(u.a)(Object(u.a)({},e),{},{FRIENDS_ALL:Object(l.a)(void 0!==e.FRIENDS_ALL.find((function(e){return e.id===t.user.id}))?e.FRIENDS_ALL:e.FRIENDS_ALL.concat(t.user))});case y:return Object(u.a)(Object(u.a)({},e),{},{DEFAULT_USE_LOGGER:t.isWriteLog});case T:return Object(u.a)(Object(u.a)({},e),{},{WEBSOCKET_STATUS:t.status});case m:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_ALL:Object(l.a)(e.TOPICS_ALL.filter((function(e){return e.id!==t.topic.id})).concat(t.topic))});case h:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.filter((function(e){return e.id!==t.topic.id})).concat(t.topic))});case w:return Object(u.a)(Object(u.a)({},e),{},{FRIENDS_ALL:[]});case x:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:[]});case S:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.filter((function(e){return e.id!==t.topic.id})))});case d:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topic.id?Object(u.a)(Object(u.a)({},e),{},{users:t.topic.users}):e})))});case te:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topicId?Object(u.a)(Object(u.a)({},e),{},{users:[].concat(Object(l.a)(e.users.map((function(e){return void 0!==e&&e}))),[t.user])}):e})))});case b:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(i){try{var s;if(void 0!==(null===(s=i.users)||void 0===s?void 0:s.find((function(e){return e.id===t.user.id}))))return i;if(void 0===i.users)return i}catch(n){return i}return i.id===t.topic.id?Object(u.a)(Object(u.a)({},i),{},{users:[].concat(Object(l.a)(i.users),[e.FRIENDS_ALL.find((function(e){return e.id===t.user.id}))])}):i})))});case v:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topic.id?Object(u.a)(Object(u.a)({},e),{},{users:e.users.filter((function(e){return e.id!==t.user.id}))}):e})))});case j:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topic_id&&void 0!==e.messages&&void 0===e.messages.find((function(e){return e.clint_uuid===t.message.clint_uuid}))?Object(u.a)(Object(u.a)({},e),{},{messages:[].concat(Object(l.a)(e.messages),[t.message])}):e})))});case O:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topic.id?Object(u.a)(Object(u.a)({},e),{},{messages:t.topic.messages}):e})))});case ie:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:[].concat(Object(l.a)(e.TOPICS_MY.filter((function(e){return e.id!==t.topic.id}))),[Object(u.a)(Object(u.a)({},t.topic),{},{messages:[].concat(Object(l.a)(t.topic.messages.filter((function(e){return e.sequence_id<t.sequence_id}))),[Object(u.a)(Object(u.a)({},t.topic.messages.filter((function(e){return e.sequence_id===t.sequence_id}))[0]),{},{file:t.file})],Object(l.a)(t.topic.messages.filter((function(e){return e.sequence_id>t.sequence_id}))))})])});case N:return Object(u.a)(Object(u.a)({},e),{},{FRIENDS_ALL:Object(l.a)(e.FRIENDS_ALL.map((function(e){return e.id===t.userid?Object(u.a)(Object(u.a)({},e),{},{profile:{file_id:t.fileid}}):e})))});case le:return Object(u.a)(Object(u.a)({},e),{},{FRIENDS_ALL:Object(l.a)(e.FRIENDS_ALL.map((function(e){return e.id===t.userid?Object(u.a)(Object(u.a)({},e),{},{profile:{file_id:t.fileid,img:t.img}}):e})))});case p:return Object(u.a)(Object(u.a)({},e),{},{TOPICS_MY:Object(l.a)(e.TOPICS_MY.map((function(e){return e.id===t.topic_id&&e.messages.map((function(e){return e.uuid===t.message.uuid?Object(u.a)(Object(u.a)({},e),{},{sequence_id:t.message.sequence_id,status:t.message.status}):e})),e})))});case se:return Object(u.a)(Object(u.a)({},e),{},{REPLY:[].concat(Object(l.a)(e.REPLY.filter((function(e){return e.notify_id!==t.notify_id}))),[{notify_id:t.notify_id,topic_id:t.topic_id,from_user_id:t.from_user_id,from_user_name:t.from_user_name,sequence_id:t.sequence_id}])});case ne:return Object(u.a)(Object(u.a)({},e),{},{MENTION:[].concat(Object(l.a)(e.MENTION.filter((function(e){return e.notify_id!==t.notify_id}))),[{notify_id:t.notify_id,topic_id:t.topic_id,from_user_id:t.from_user_id,from_user_name:t.from_user_name,sequence_id:t.sequence_id}])});default:return Object(u.a)(Object(u.a)({},e),{},{DEFAULT_NEXT_RAW_LOG_ID:e.DEFAULT_NEXT_RAW_LOG_ID+1,DEFAULT_RAW_LOG:[].concat(Object(l.a)(e.DEFAULT_RAW_LOG),[{id:e.DEFAULT_NEXT_RAW_LOG_ID,text:"[REDUCER-GENERAL] ERROR PARSE "+JSON.stringify(t)}])})}},ye=function(e,t){switch(t.type){case ee:return Object(u.a)(Object(u.a)({},e),{},{selectopicid:t.selectopicid});case be:return Object(u.a)(Object(u.a)({},e),{},{isShowCreateTopic:t.isShow});case me:return Object(u.a)(Object(u.a)({},e),{},{isShowChatMobile:t.isShow});case he:return Object(u.a)(Object(u.a)({},e),{},{isShowInvite:t.isShow});case Oe:return Object(u.a)(Object(u.a)({},e),{},{isShowChatUser:t.isShow});case ge:return Object(u.a)(Object(u.a)({},e),{},{isShowNotify:t.isShow});case xe:return Object(u.a)(Object(u.a)({},e),{},{getToastMsg:t.msg});case pe:return Object(u.a)(Object(u.a)({},e),{},{topicsAll:t.topicsAll});case je:return Object(u.a)(Object(u.a)({},e),{},{topicUsers:t.topicUsers});case fe:return Object(u.a)(Object(u.a)({},e),{},{sendImage:t.sendImage});case de:return Object(u.a)(Object(u.a)({},e),{},{isChatboxLoading:t.isShow});case oe:return Object(u.a)(Object(u.a)({},e),{},{hideSignup:t.isShow});case ce:return Object(u.a)(Object(u.a)({},e),{},{hideLogin:t.isShow});case re:return Object(u.a)(Object(u.a)({},e),{},{profileImg:t.file});case ae:return Object(u.a)(Object(u.a)({},e),{},{replyContent:t.msg});case ue:var i;return"reply"===t.item?i=Object(u.a)(Object(u.a)({},e.popupMessageItems),{},{reply:t.isShow}):"relay"===t.item?i=Object(u.a)(Object(u.a)({},e.popupMessageItems),{},{relay:t.isShow}):"delete"===t.item&&(i=Object(u.a)(Object(u.a)({},e.popupMessageItems),{},{delete:t.isShow})),Object(u.a)(Object(u.a)({},e),{},{popupMessageItems:i});case _e:return Object(u.a)(Object(u.a)({},e),{},{mentionUsers:t.user?[].concat(Object(l.a)(e.mentionUsers.filter((function(e){return e.id!==t.user.id}))),[{id:t.user.id,name:t.user.auth.name}]):[]});case Se:return Object(u.a)(Object(u.a)({},e),{},{msgForRelay:t.msg});case ve:return Object(u.a)(Object(u.a)({},e),{},{msgForMention:t.msg});default:return e}},Te={generalStates:Ee,viewStates:{selectopicid:0,isShowCreateTopic:!1,isShowChatMobile:!1,isShowInvite:!1,isShowChatUser:!1,isChatboxLoading:!1,isShowNotify:!1,topicsAll:[],topicUsers:[],sendImage:null,hideSignup:!1,hideLogin:!1,profileImg:null,replyContent:{from_user_id:0,from_user_name:"",content:"",sequence_id:0},popupMessageItems:{reply:!1,relay:!1,delete:!1},mentionUsers:[],msgForRelay:"",msgForMention:[],getToastMsg:null}},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;return{generalStates:Ne(e.generalStates,t),viewStates:ye(e.viewStates,t)}},Ae={toJSON:function(){var e={userAgent:this.userAgent(),os:this.os(),browser:{name:this.browser(),version:this.version(),mobile:this.isMobile(),desktop:this.isDesktop()},screen:{hd:this.isHD(),pixelRatio:this.pixelRatio(),landscape:this.isLandscape(),portrait:this.isPortrait(),touch:this.isTouch()}};return this.isIOS()&&(e.ios={version:this.getIOSVersion(),device:this.isIPhone()?"iphone":this.isIPad()?"ipad":void 0}),e},os:function(){return this.isIOS()?"ios":this.isAndroid()?"android":this.isWindows()?"windows":this.isUnix()?"unix":this.isMac()?"mac":this.isLinux()?"linux":this.isBlackBerry()?"blackberry":void 0},browser:function(){return this.isSafari()?"safari":this.isChrome()?"chrome":this.isIE()?"ie":this.isEdge()?"edge":this.isFirefox()?"firefox":this.isOpera()?"opera":void 0},userAgent:function(){return navigator.userAgent},browserName:function(){var e,t=this.userAgent(),i=t.match(/(fxios|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(i[1]))return"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1])if(e=t.match(/(edge(?=\/))\/?\s*(\d+)/i))i=e;else if(null!=(e=t.match(/\bOPR\/(\d+)/)))return"Opera "+e[1];return i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" ")},innerWidth:function(){return window.innerWidth},innerHeight:function(){return window.innerHeight},width:function(){return window.screen.width},height:function(){return window.screen.height},isMobile:function(){return null!=this.userAgent().match(/iPhone|iPad|iPod|Android|BlackBerry|Opera Mini|IEMobile|CRiOS|OPiOS|Mobile|FxiOS/i)},isDesktop:function(){return!this.isMobile()},isSafari:function(){return-1!=this.userAgent().indexOf("Safari")&&-1!=navigator.vendor.indexOf("Apple Computer")&&!this.isChrome()&&!this.isFirefox()&&!this.isOpera()},isChrome:function(){return(-1!=this.userAgent().indexOf("Chrome")&&-1!=navigator.vendor.indexOf("Google Inc")||-1!=this.userAgent().indexOf("CriOS"))&&!this.isOpera()},isIE:function(){return null!=this.browserName().toLowerCase().match(/ie|msie|iemobile/i)},isEdge:function(){return null!=this.browserName().toLowerCase().match(/edge/i)},isFirefox:function(){return null!=this.browserName().toLowerCase().match(/firefox|fxios/i)},isOpera:function(){return null!=this.userAgent().toLowerCase().match(/opera|opr|opera mini|opios/i)||"[object OperaMini]"===Object.prototype.toString.call(window.operamini)},isMobileChrome:function(){return null!=this.userAgent().toLowerCase().match("crios")||this.isChrome()&&this.isMobile()},isMobileSafari:function(){return this.isMobile()&&this.isSafari()},isMobileIE:function(){return this.isMobile()&&this.isIE()},isMobileOpera:function(){return this.isMobile()&&this.isOpera()},isMobileFirefox:function(){return this.isMobile()&&this.isFirefox()},isHD:function(){return!!window.devicePixelRatio&&(window.devicePixelRatio&&window.devicePixelRatio>1)},pixelRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:1},isIOS:function(){return null!=this.userAgent().match(/iPhone|iPad|iPod/i)},isAndroid:function(){return null!=this.userAgent().match(/Android/i)},isWindows:function(){return null!=this.userAgent().match(/Windows/i)},isUnix:function(){return null!=this.userAgent().match(/Unix/i)},isMac:function(){return null!=this.userAgent().match(/Mac/i)&&!this.isIOS()},isLinux:function(){return null!=this.userAgent().match(/Linux/i)&&!this.isAndroid()},isBlackBerry:function(){return null!=this.userAgent().match(/BlackBerry/i)},isIPad:function(){var e=/ipad/gi.test(navigator.platform);return e},isIPhone:function(){return/iphone/gi.test(navigator.platform)},isLandscape:function(){return window.innerHeight<window.innerWidth},isPortrait:function(){return!this.isLandscape()},getIOSVersion:function(){if(this.isIOS()){var e=navigator.appVersion.match(/OS (\d+_\d+)/i);return e=e[1]?+e[1].replace("_","."):0}return!1},isStandAlone:function(){return!!navigator.standalone&&navigator.standalone},version:function(){return this.browserName().replace(/^\D+/g,"")},maxTouchPoints:function(){if(navigator.maxTouchPoints)return navigator.maxTouchPoints},isTouch:function(){return"ontouchstart"in document.documentElement}},Ce=function(){var e=window.navigator,t=window.screen,i=e.mimeTypes.length;return i+=e.userAgent.replace(/\D+/g,""),i+=e.plugins.length,i+=t.height||"",i+=t.width||"",i+=t.pixelDepth||""},Le=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},Re=function(){var e=function(){var e={};return e.browser_id=Ce(),e.user_agent=Ae.userAgent(),Ae.isMobile()?(e.device_id=Ce(),e.platform="mobile"):(e.device_id="-1",e.platform="desktop"),Ae.isIOS()?e.operation_system="ios":Ae.isMac()?e.operation_system="mac":Ae.isWindows()?e.operation_system="windows":Ae.isUnix()?e.operation_system="unix":Ae.isLinux()?e.operation_system="linux":Ae.isAndroid()?e.operation_system="android":Ae.isBlackBerry()?e.operation_system="blackberry":e.operation_system="etc",e}();return{browser_id:e.browser_id,user_agent:e.user_agent,device_id:e.device_id,platform:e.platform,operation_system:e.operation_system}},ke=function(e,t){return{auth:{uuid:Le(),request:{what:"session",how:"login",using:"id",user:{auth:{email:e,password:t},device_info:Re()}}}}},Me=function(){return{auth:{uuid:Le(),request:{what:"token",how:"select"}}}},De=function(){return{auth:{uuid:Le(),request:{what:"session",how:"logout"}}}},qe=function(){return{meta:{uuid:Le(),request:{what:"topic",how:"select"}}}},Ue=function(){return{meta:{uuid:Le(),request:{what:"topic",how:"select",using:"me"}}}},Pe=function(){return{meta:{uuid:Le(),request:{what:"user",how:"select"}}}},Fe=function(e){return{meta:{uuid:Le(),request:{what:"user",how:"select",using:"topic",topic:{id:e}}}}},We=function(e){return{meta:{uuid:Le(),request:{what:"message",how:"select",topic:{id:e}}}}},Ye=function(e,t,i,s,n,c){var o={msg:{uuid:Le(),request:{what:"message",how:"send",topic:{id:e},message:t}}};return"reply"===i&&(o.msg.request.custom={notify:{reply:{sequence_id:c,to_user_id:n}}}),"mention"===i&&(o.msg.request.custom={notify:{mention:{to_users_id:s.map((function(e){return{id:e.id}}))}}}),"reply-mention"===i&&(o.msg.request.custom={notify:{reply:{sequence_id:c,to_user_id:n},mention:{to_users_id:s.map((function(e){return{id:e.id}}))}}}),o},Ge=function(e,t){return{msg:{uuid:Le(),request:{what:"message",how:"ack",topic:{id:e},sequence_id:t}}}},Ve=function(e,t){return{msg:{uuid:Le(),request:{what:"message",how:"ctrl",topic:{id:e},message:t}}}};var Be=function(e,t){void 0!==t.ctrl.request?t.ctrl.request.what===k&&t.ctrl.request.how===F?function(e,t){!0===e.from.me?"alone"===e.ctrl.request.who&&void 0!==e.ctrl.response.topic?(e.ctrl.response.topic.is_owner=!0,_t(t,e.ctrl.response.topic),Ot(t,R,"[RECV] \ubc29 \uc0dd\uc131 \uc131\uacf5 "),Tt(t,e.ctrl.response.topic.id),ft(t,We(e.ctrl.response.topic.id)),Ot(t,L,"[SEND] "+JSON.stringify(Ve(e.ctrl.response.topic.id,$))),ft(t,Ve(e.ctrl.response.topic.id,$))):Ot(t,R,"[RECV] \ubc29 \uc2e4\ud328 "):Ot(t,R,"[RECV] \uc798\ubabb\ub41c \ubc29 \uc0dd\uc131 \uc694\uccad, \ubc29\uc0dd\uc131 \uc694\uccad\uc758 \uc751\ub2f5\uc740 \ub098\ud55c\ud14c\ub9cc \uc640\uc57c\ub428")}(t,e):t.ctrl.request.what===k&&t.ctrl.request.how===U?function(e,t){console.log("\ud83d\ude80 ~ file: index.js ~ line 42 ~ CtrlTopicInvite ~ root, props",e.ctrl.response.topic.users[e.ctrl.response.topic.users.length-1]),!0===e.from.me?void 0!==e.ctrl.response.topic&&void 0!==e.ctrl.response.topic.users?(Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305 \ubc29\uc5d0 \uc0ac\uc6a9\uc790 \ucd08\ub300 \uc131\uacf5"),It(t,"\uc0ac\uc6a9\uc790 \ucd08\ub300\ub97c \uc131\uacf5\ud588\uc5b4\uc694."),e.ctrl.response.topic.users.forEach((function(i){wt(t,{id:e.ctrl.response.topic.id},i)})),ft(t,We(e.ctrl.request.topic.id))):(It(t,"\uc0ac\uc6a9\uc790\ub97c \ucd08\ub300\ud558\uc9c0 \ubabb\ud588\uc5b4\uc694."),Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305 \ubc29\uc5d0 \uc0ac\uc6a9\uc790 \ucd08\ub300 \uc2e4\ud328. response \uc5c6\uac70\ub098 response.topic \uc5c6\uc74c")):void 0!==e.ctrl.response.topic&&void 0!==e.ctrl.response.topic.users?e.ctrl.request.user_id===t.state.generalStates.SESSION_USER_INFO.id?(Ot(t,R,"[RECV] \ub0b4\uac00 \ub2e4\ub978 \uc0ac\ub78c\uc758 \ucc44\ud305\ubc29\uc5d0 \ucd08\ub300 \ub428"),e.ctrl.response.topic.is_owner=!1,_t(t,e.ctrl.response.topic),ft(t,We(e.ctrl.request.topic.id))):(Ot(t,R,"[RECV] \ub0b4\uac00 \uc18d\ud574\uc788\ub294 \ucc44\ud305\ubc29\uc5d0 \ub2e4\ub978\uc0ac\ub78c\uc774 \ucd08\ub300\ub428 "),e.ctrl.response.topic.users.forEach((function(i){wt(t,{id:e.ctrl.response.topic.id},i)}))):Ot(t,R,"[RECV] \ucd08\ub300 \uc2e4\ud328. response \uc5c6\uac70\ub098 response.topic \uc5c6\uc74c")}(t,e):t.ctrl.request.what===k&&t.ctrl.request.how===P?function(e,t){!0===e.from.me?(Ot(t,R,"[RECV] \ub0b4\uac00 \ucc44\ud305\ubc29\uc5d0 \ucc38\uac00\ud568"),e.ctrl.response.topic.is_owner=!1,_t(t,e.ctrl.response.topic),Ot(t,R,"[SEND] "+JSON.stringify(Fe(e.ctrl.response.topic.id))),ft(t,We(e.ctrl.response.topic.id)),ft(t,Fe(e.ctrl.response.topic.id))):(Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305\ubc29\uc5d0 \uc0ac\uc6a9\uc790\uac00 \ucc38\uc5ec\ud568"),e.ctrl.response.topic.users.forEach((function(i){wt(t,{id:e.ctrl.response.topic.id},i)})),ft(t,We(e.ctrl.response.topic.id)),ft(t,Pe()))}(t,e):t.ctrl.request.what===k&&t.ctrl.request.how===W?function(e,t){!0===e.from.me?(vt(t,{id:e.ctrl.request.topic.id}),Ot(t,R,"[RECV] \ucc44\ud305\ubc29\uc5d0\uc11c \ub098\uac00\uae30 \uc131\uacf5"),ft(t,We(e.ctrl.request.topic.id))):(Et(t,{id:e.ctrl.request.topic.id},e.from.user),Ot(t,R,"[RECV] \ucc44\ud305\ubc29\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \ub098\uac10"),ft(t,We(e.ctrl.request.topic.id))),ft(t,qe())}(t,e):Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8 \ud30c\uc2f1 \uc2e4\ud328"):Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")};function He(e,t){ht(e,!0),bt(e,t.auth.response.user.id,t.auth.response.user.auth.name),Ot(e,L,"[SEND] "+JSON.stringify(Me())),ft(e,Me()),Ot(e,L,"[SEND] "+JSON.stringify(Ue())),ft(e,Ue()),Ot(e,L,"[SEND] "+JSON.stringify(Pe())),ft(e,Pe()),function(e,t){e.dispatch({type:ce,isShow:t})}(e,!0),function(e,t){e.dispatch({type:oe,isShow:t})}(e,!0),It(e,"\ub85c\uadf8\uc778\uc5d0 \uc131\uacf5\ud588\uc5b4\uc694.")}function Je(e){Ot(e,R,"[RECV] logout \uc131\uacf5 "),It(e,"\ub85c\uadf8\uc544\uc6c3\uc5d0 \uc131\uacf5\ud588\uc5b4\uc694."),ht(e,!1),bt(e,null,null),St(e),function(e){e.dispatch({type:w})}(e)}var Ke=function(e,t){void 0!==t.auth.request?t.auth.request.what===q&&t.auth.request.how===Y?He(e,t):t.auth.request.what===q&&t.auth.request.how===G?Je(e):t.auth.request.what===K&&t.auth.request.how===V?function(e,t){Ot(e,R,"[RECV] jwt token receive \uc131\uacf5 "),mt(e,t.auth.response.jwt),localStorage.setItem("chattingLoginKey",t.auth.response.jwt)}(e,t):t.auth.request.what===M&&t.auth.request.how===J?function(e,t){Ot(e,R,"[RECV] Register \uc131\uacf5 "),It(e,"\ud68c\uc6d0\uac00\uc785\uc5d0 \uc131\uacf5\ud588\uc5b4\uc694."),ft(e,ke(t.auth.request.user.auth.email,t.auth.request.user.auth.password))}(e,t):Ot(e,R,"[RECV] AUTH \uc624\ube0c\uc81d\ud2b8\uc758 \uc798\ubabb\ub41c REQUEST \uc694\uccad "):Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")},Ze=function(e,t){localStorage.setItem(e,JSON.stringify(t))},Xe=function(e){return!!localStorage.getItem(e)&&JSON.parse(localStorage.getItem(e))},ze=function(e,t){return e&&t?"NANOIT_CHAT_USER_".concat(e,"_").concat(t):(console.log("makeLocalUserTopicName => \uc774\ub984\uc0dd\uc131\uc5d0 \ud544\uc694\ud55c \uc815\ubcf4\uac00 \uc5c6\uc74c"),!1)},Qe=function(e,t){if(e&&t){var i=ze(e,t),s=Xe(i);return s||(Ze(i,{}),Xe(i))}};function $e(e,t){void 0!==e.meta.response?void 0!==e.meta.response.topics?(!function(e,t){e&&t&&e.state.generalStates.SESSION_USER_INFO.id}(t,e.meta.response.topics),e.meta.response.topics.forEach((function(i){i.owner===t.state.generalStates.SESSION_USER_INFO.id?i.is_owner=!0:i.is_owner=!1,void 0!==e.meta.request.using&&"me"===e.meta.request.using?_t(t,i):function(e,t){e.dispatch({type:m,topic:t})}(t,i)}))):Ot(t,R,"[RECV] response.topics \uac1d\uccb4 \uc5c6\uc74c"):Ot(t,R,"[RECV] response \uac1d\uccb4 \uc5c6\uc74c")}function et(e,t){if(void 0!==e.meta.request.using&&"topic"===e.meta.request.using)void 0!==e.meta.response.topic&&void 0!==e.meta.response.topic.users?(Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305\ubc29\ub0b4 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc218\uc2e0"),xt(t,e.meta.response.topic)):Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305\ubc29\ub0b4 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c6\uc74c");else if(void 0!==e.meta.response.users){Ot(t,R,"[RECV] \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc218\uc2e0");var i=Xe("NANOIT_CHAT_FRIENDS_ALL");if(i){var s=[];e.meta.response.users.forEach((function(e){if(s.push(e.id),i.find((function(t){return t.id===e.id}))){var n,c;!function(e){var t=Xe("NANOIT_CHAT_FRIENDS_ALL");if(t){var i=t.find((function(t){return t.id===e.id}));Ze("NANOIT_CHAT_FRIENDS_ALL",[].concat(Object(l.a)(t.filter((function(t){return t.id!==e.id}))),[i?Object(u.a)({},t.find((function(t){return t.id===e.id}))):null]))}}(e),gt(t,e),console.log("parser/meta => localStorage\uc5d0 \ub4f1\ub85d\ub41c \ud68c\uc6d0");var o=i.filter((function(t){return t.id===e.id}));(null===(n=o.proflie)||void 0===n?void 0:n.file_id)&&(null===(c=e.profile)||void 0===c?void 0:c.file_id)&&(o.profile=Object(u.a)(Object(u.a)({},o.profile),{},{file_id:e.profile.file_id}),At(t,e.id,e.profile.file_id),console.log("parser/meta => localStorage\uc5d0 \ub4f1\ub85d\ub41c \ud68c\uc6d0\uc758 file_id \ucd94\uac00 \uc0bd\uc785"))}else!function(e){if(e){console.log("setLocalAddNewUser");var t=Xe("NANOIT_CHAT_FRIENDS_ALL");t&&Ze("NANOIT_CHAT_FRIENDS_ALL",[].concat(Object(l.a)(t.filter((function(t){return t.id!==e.id}))),[Object(u.a)({},e)]))}}(e),gt(t,e),console.log("parser/meta => localStorage\uc5d0 \uc5c6\ub294 \uc2e0\uaddc\ud68c\uc6d0")}))}else n=e.meta.response.users,console.log("setLocalAddFriendsAll"),Ze("NANOIT_CHAT_FRIENDS_ALL",n),e.meta.response.users.forEach((function(e){return gt(t,e)})),console.log("parser/meta => \uc774 \uc571\uc744 \ucc98\uc74c \uc0ac\uc6a9\ud558\ub294 \uc2e0\uaddc\ud68c\uc6d0")}else Ot(t,R,"[RECV] \ubaa8\ub4e0 \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc5c6\uc74c");var n}function tt(e,t){void 0!==e.meta.response.topic&&void 0!==e.meta.response.topic.messages?(Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305\ubc29\ub0b4 \ucc44\ud305 \uc815\ubcf4 \uc218\uc2e0"),function(e,t){if(!Qe(e,t.id).messages){var i=ze(e,t.id);Ze(i,t)}}(t.state.generalStates.SESSION_USER_INFO.id,e.meta.response.topic),yt(t,e.meta.response.topic)):Ot(t,R,"[RECV] \ub0b4 \ucc44\ud305\ubc29\ub0b4 \ucc44\ud305 \uc815\ubcf4 \uc5c6\uc74c")}var it,st=function(e){return{msg:{uuid:Le(),request:{what:"reply",how:"ack",notify:{id:e}}}}},nt=function(e,t){var i,s,n;if(void 0!==t.msg.request)if(t.msg.request.what===D&&t.msg.request.how===B){var c,o,r,a,l,u,d,f,j={clint_uuid:t.msg.uuid,content:t.msg.request.message,created_at:new Date,message_type:"send",sequence_id:t.msg.response.message.sequence_id,topic_id:t.msg.request.topic.id};!0===t.from.me?(j.from_user_id=e.state.generalStates.SESSION_USER_INFO.id,j.from_user_name=e.state.generalStates.SESSION_USER_INFO.name):(j.from_user_id=t.from.user.id,j.from_user_name=t.from.user.auth.name),(null===(c=t.msg.request.custom)||void 0===c?void 0:c.notify.reply)&&!(null===(o=t.msg.request.custom)||void 0===o?void 0:o.notify.mention)&&(j.custom={notify:{reply:{sequence_id:t.msg.request.custom.notify.reply.sequence_id,to_user_id:t.msg.request.custom.notify.reply.to_user_id}}}),(null===(r=t.msg.request.custom)||void 0===r?void 0:r.notify.mention)&&!(null===(a=t.msg.request.custom)||void 0===a?void 0:a.notify.reply)&&(j.custom={notify:{mention:{to_users_id:t.msg.request.custom.notify.mention.to_users_id}}}),(null===(l=t.msg.request.custom)||void 0===l?void 0:l.notify.reply)&&(null===(u=t.msg.request.custom)||void 0===u?void 0:u.notify.mention)&&(j.custom={notify:{reply:{sequence_id:t.msg.request.custom.notify.reply.sequence_id,to_user_id:t.msg.request.custom.notify.reply.to_user_id},mention:{to_users_id:t.msg.request.custom.notify.mention.to_users_id}}}),Nt(e,t.msg.request.topic.id,j),(null===(d=t.msg.request.custom)||void 0===d?void 0:d.notify.reply)&&!0===t.from.me&&ft(e,(i=t.msg.request.topic.id,s=t.msg.request.custom.notify.reply.to_user_id,n=t.msg.response.message.sequence_id,{notify:{uuid:Le(),request:{what:"reply",how:"create",topic:{id:i},user:{id:s},sequence_id:n}}})),(null===(f=t.msg.request.custom)||void 0===f?void 0:f.notify.mention)&&!0===t.from.me&&ft(e,function(e,t,i){return{notify:{uuid:Le(),request:{what:"mention",how:"create",topic:{id:e},users:t.map((function(e){return{id:e.id}})),sequence_id:i}}}}(t.msg.request.topic.id,t.msg.request.custom.notify.mention.to_users_id,t.msg.response.message.sequence_id)),Ot(e,L,"[SEND] "+JSON.stringify(Ge(t.msg.request.topic.id,t.msg.response.message.sequence_id))),ft(e,Ge(t.msg.request.topic.id,t.msg.response.message.sequence_id))}else t.msg.request.what===D&&t.msg.request.how===H||t.msg.request.what===D&&t.msg.request.how;else Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")},ct=i(5),ot=i.n(ct),rt=i(13),at=new(i(167).WebClient)("xoxb-71413377654-2398345124724-5plDwTcL5RMx3aky81KzpWkV"),lt=function(){var e=Object(rt.a)(ot.a.mark((function e(t){var i;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at.chat.postMessage({text:t,channel:"C02BJ9J0V27"});case 2:i=e.sent,console.log("\uc5d0\ub7ec \uba54\uc2dc\uc9c0 \ubc1c\uc1a1 ".concat(i.ts,", \uc5d0\ub7ec\uc815\ubcf4 : ").concat(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ut(e){var t;return void 0!==e.msg?t=e.msg.uuid:void 0!==e.auth?t=e.auth.uuid:void 0!==e.meta?t=e.meta.uuid:void 0!==e.ctrl?t=e.ctrl.uuid:void 0!==e.notify&&(t=e.notify.uuid),t}function dt(e,t){var i,s,n;try{i=JSON.parse(e)}catch(E){return console.log(e),void console.log(E)}if(Ot(t,L,"[RECV] "+e),void 0!==i.ack)return void 0===i.ack.uuid?void Ot(t,L,"[RECV] "+i):void(void 0!==i.result&&200===i.result.status_code?jt(t,i.ack.uuid,"ack","proc"):jt(t,i.ack.uuid,Q,Z));if(void 0!==i.from)if(void 0!==i.auth)if(void 0===i.result||200!==i.result.status_code)if(jt(t,i.auth.uuid,Z,Q),Ot(t,R,"[RECV] root.auth == result object\uac00 \uc5c6\uac70\ub098 status_code \uc2e4\ud328 \ucf54\ub4dc \uc218\uc2e0"),void 0!==i.auth&&i.auth.request.what===q&&i.auth.request.how===Y&&ht(t,!1),i.auth.request.what===q&&i.auth.request.how===Y)if(-1!==(null===(s=i.result)||void 0===s?void 0:s.cause.indexOf("user.id is already login")))It(t,"\ub85c\uadf8\uc778 \uc694\uccad \uc2e4\ud328, \uc774\ubbf8 \ub2e4\ub978 \uae30\uae30\uc5d0\uc11c \ub85c\uadf8\uc778\uc911\uc774\uc5d0\uc694");else if(-1!==(null===(n=i.result)||void 0===n?void 0:n.cause.indexOf("id pw login fail")))It(t,"\uc774\uba54\uc77c, \ube44\ubc00\ubc88\ud638\ub97c \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694.");else{var c;It(t,"\ub85c\uadf8\uc778 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 122 ~ root.auth, errorinfo : \ub85c\uadf8\uc778 \uc694\uccad ".concat(null===(c=i.result)||void 0===c?void 0:c.cause))}else if(i.auth.request.what===q&&i.auth.request.how===G){var o;It(t,"\ub85c\uadf8\uc544\uc6c3 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 122 ~ root.auth, errorinfo : \ub85c\uadf8\uc544\uc6c3 \uc694\uccad ".concat(null===(o=i.result)||void 0===o?void 0:o.cause))}else if(i.auth.request.what===K&&i.auth.request.how===V){var r;It(t,"JWT \ud1a0\ud070 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 122 ~ root.auth, errorinfo : JWT \ud1a0\ud070 \uc694\uccad ".concat(null===(r=i.result)||void 0===r?void 0:r.cause))}else if(i.auth.request.what===M&&i.auth.request.how===J){var a,l;if(-1!==(null===(a=i.result)||void 0===a?void 0:a.cause.indexOf("email is already")))It(t,"\uc774\ubbf8 \ub4f1\ub85d\ub41c \uc774\uba54\uc77c\uc774\uc5d0\uc694.");else It(t,"\ud68c\uc6d0\uac00\uc785 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 122 ~ root.auth, errorinfo : \ud68c\uc6d0\uac00\uc785 \uc694\uccad ".concat(null===(l=i.result)||void 0===l?void 0:l.cause))}else{var u;It(t,"\uc778\uc99d \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 122 ~ root.auth, errorinfo : else ".concat(null===(u=i.result)||void 0===u?void 0:u.cause))}else jt(t,i.auth.uuid,X,Q),Ke(t,i);else if(void 0!==i.meta){var d,f,j;if(void 0===i.result||200!==i.result.status_code)if(jt(t,i.meta.uuid,Z,Q),Ot(t,R,"[RECV] root.meta == result object\uac00 \uc5c6\uac70\ub098 status_code \uc2e4\ud328 \ucf54\ub4dc \uc218\uc2e0"),i.meta.request.what===k&&i.meta.request.how===V)if(-1!==(null===(d=i.result)||void 0===d?void 0:d.cause.indexOf("topic count is zero")))console.log("\ubd88\ub7ec\uc62c \ubc29 \uc815\ubcf4\uac00 \uc5c6\uc74c");else if(-1!==(null===(f=i.result)||void 0===f?void 0:f.cause.indexOf("(BadValue) $in needs an array")))console.log("\ubd88\ub7ec\uc62c \ubc29 \uc815\ubcf4\uac00 \uc5c6\uc74c");else It(t,"\ubc29\uc815\ubcf4 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 135 ~ root.meta, errorinfo : \ubc29\uc815\ubcf4 \uc694\uccad ".concat(null===(j=i.result)||void 0===j?void 0:j.cause));else if(i.meta.request.what===M&&i.meta.request.how===V){var p;It(t,"\uc720\uc800\uc815\ubcf4 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 135 ~ root.meta, errorinfo : \uc720\uc800\uc815\ubcf4 \uc694\uccad ".concat(null===(p=i.result)||void 0===p?void 0:p.cause))}else if(i.meta.request.what===D&&i.meta.request.how===V){var O,h;if(-1!==(null===(O=i.result)||void 0===O?void 0:O.cause.indexOf("mongo: no documents in result")))console.log("mongo: no documents in result");else It(t,"\uba54\uc2dc\uc9c0 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 135 ~ root.meta, errorinfo : \uba54\uc2dc\uc9c0 \uc694\uccad ".concat(null===(h=i.result)||void 0===h?void 0:h.cause))}else{var m;It(t,"\uba54\ud0c0 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 135 ~ root.meta, errorinfo : else ".concat(null===(m=i.result)||void 0===m?void 0:m.cause))}else jt(t,i.meta.uuid,X,Q),function(e,t){void 0!==t.meta.request?t.meta.request.what===k&&t.meta.request.how===V?$e(t,e):t.meta.request.what===M&&t.meta.request.how===V?et(t,e):t.meta.request.what===D&&t.meta.request.how===V?tt(t,e):Ot(e,R,"[RECV] META RESPONSE \ud30c\uc2f1 \uc2e4\ud328"):Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")}(t,i)}else if(void 0!==i.ctrl){var b;if(void 0===i.result||200!==i.result.status_code)if(jt(t,i.ctrl.uuid,Z,Q),Ot(t,R,"[RECV] root.ctrl == result object\uac00 \uc5c6\uac70\ub098 status_code \uc2e4\ud328 \ucf54\ub4dc \uc218\uc2e0"),i.ctrl.request.what===k&&i.ctrl.request.how===F)It(t,"\ubc29\ub9cc\ub4e4\uae30 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 170 ~ root.ctrl, errorinfo : \ubc29\ub9cc\ub4e4\uae30 \uc694\uccad ".concat(null===(b=i.result)||void 0===b?void 0:b.cause));else if(i.ctrl.request.what===k&&i.ctrl.request.how===U){var g;It(t,"\ubc29\ucd08\ub300 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 170 ~ root.ctrl, errorinfo : \ubc29\ucd08\ub300 \uc694\uccad ".concat(null===(g=i.result)||void 0===g?void 0:g.cause))}else if(i.ctrl.request.what===k&&i.ctrl.request.how===P){var _;It(t,"\ubc29\uc785\uc7a5 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 170 ~ root.ctrl, errorinfo : \ubc29\uc785\uc7a5 \uc694\uccad ".concat(null===(_=i.result)||void 0===_?void 0:_.cause))}else if(i.ctrl.request.what===k&&i.ctrl.request.how===W){var S;It(t,"\ubc29\ub5a0\ub098\uae30 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 170 ~ root.ctrl, errorinfo : \ubc29\ub5a0\ub098\uae30 \uc694\uccad ".concat(null===(S=i.result)||void 0===S?void 0:S.cause))}else{var v;It(t,"\ubc29 \ucee8\ud2b8\ub864 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 170 ~ root.ctrl, errorinfo : else ".concat(null===(v=i.result)||void 0===v?void 0:v.cause))}else jt(t,i.ctrl.uuid,X,Q),Be(t,i)}else if(void 0!==i.msg){var x;if(void 0===i.result||200!==i.result.status_code)if(jt(t,i.msg.uuid,Z,Q),Ot(t,R,"[RECV] root.msg == result object\uac00 \uc5c6\uac70\ub098 status_code \uc2e4\ud328 \ucf54\ub4dc \uc218\uc2e0"),i.msg.request.what===D&&i.msg.request.how===B)It(t,"\uba54\uc2dc\uc9c0\uc804\uc1a1 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 221 ~ root.msg, errorinfo : \uba54\uc2dc\uc9c0\uc804\uc1a1 \uc694\uccad ".concat(null===(x=i.result)||void 0===x?void 0:x.cause));else if(i.msg.request.what===D&&i.msg.request.how===H);else if(i.msg.request.what===D&&"ack"===i.msg.request.how);else{var w;It(t,"\uba54\uc2dc\uc9c0 \uc694\uccad\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694."),lt("error => \ud83d\ude80 ~ file: dispatchs.js ~ line 221 ~ root.msg, errorinfo : else ".concat(null===(w=i.result)||void 0===w?void 0:w.cause))}else jt(t,i.msg.uuid,X,Q),nt(t,i)}else void 0!==i.notify&&(void 0===i.result||200!==i.result.status_code?(jt(t,i.notify.uuid,Z,Q),Ot(t,R,"[RECV] root.notify == result object\uac00 \uc5c6\uac70\ub098 status_code \uc2e4\ud328 \ucf54\ub4dc \uc218\uc2e0")):(jt(t,i.notify.uuid,X,Q),function(e,t){var i,s;void 0!==t.notify.request?"reply"===t.notify.request.what&&!1===(null===(i=t.from)||void 0===i?void 0:i.me)?(Ct(e,t.notify.response.notify.id,t.notify.request.topic.id,t.from.user.id,t.from.user.auth.name,t.notify.request.sequence_id),Ot(e,L,"[RECV] "+JSON.stringify(st(t.notify.request.topic.id))),ft(e,st(t.notify.request.topic.id))):"mention"===t.notify.request.what&&!1===(null===(s=t.from)||void 0===s?void 0:s.me)&&Lt(e,t.notify.response.notify.id,t.notify.request.topic.id,t.from.user.id,t.from.user.auth.name,t.notify.request.sequence_id):Ot(e,R,"[RECV] request \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")}(t,i)));else Ot(t,R,"[RECV] from \uc624\ube0c\uc81d\ud2b8\uac00 \uc5c6\uc74c")}function ft(e,t){Ot(e,L,"[SEND] "+JSON.stringify(t)),pt(e,t),void 0!==it?it(JSON.stringify(t)):console.log("[SEND-FAIL] WEBSOCKET WRITER IS NOT SET")}function jt(e,t,i,s){e.dispatch({type:_,message:{uuid:t,result:i,status:s}})}function pt(e,t){e.dispatch({type:g,message:{uuid:ut(t),result:"send",status:z,json:t}})}function Ot(e,t,i){e.state.generalStates.DEFAULT_USE_LOGGER&&e.dispatch({type:t,log:i})}function ht(e,t){t||mt(e,null),e.dispatch({type:I,isLogin:t})}function mt(e,t){e.dispatch({type:A,token:t})}function bt(e,t,i){e.dispatch({type:C,user:{id:t,name:i}})}function gt(e,t){e.dispatch({type:f,user:t})}function _t(e,t){e.dispatch({type:h,topic:t})}function St(e){e.dispatch({type:x})}function vt(e,t){e.dispatch({type:S,topic:t})}function xt(e,t){e.dispatch({type:d,topic:t})}function wt(e,t,i){e.dispatch({type:b,topic:t,user:i})}function Et(e,t,i){e.dispatch({type:v,topic:t,user:i})}function Nt(e,t,i){e.dispatch({type:j,topic_id:t,message:i})}function yt(e,t){e.dispatch({type:O,topic:t})}function Tt(e,t){e.dispatch({type:ee,selectopicid:t})}function It(e,t){e.dispatch({type:xe,msg:t})}function At(e,t,i){e.dispatch({type:N,userid:t,fileid:i})}function Ct(e,t,i,s,n,c){e.dispatch({type:se,notify_id:t,topic_id:i,from_user_id:s,from_user_name:n,sequence_id:c})}function Lt(e,t,i,s,n,c){e.dispatch({type:ne,notify_id:t,topic_id:i,from_user_id:s,from_user_name:n,sequence_id:c})}var Rt=function(e){return{Logger:function(t,i){Ot(e,t,i)},UpdateIsWriteLog:function(t){!function(e,t){e.dispatch({type:y,isWriteLog:t})}(e,t)},UpdateLogin:function(t){ht(e,t)},UpdateJwt:function(t){mt(e,t)},UpdateUser:function(t,i){bt(e,i,t)},InsertMyTopic:function(t){_t(e,t)},ResetAllStates:function(){!function(e){e.dispatch({type:E})}(e)},DeleteAllTopics:function(){St(e)},DeleteTopicByTopicId:function(t){vt(e,t)},InsertUserById:function(t){xt(e,t)},InsertNewUserById:function(t,i,s){!function(e,t,i,s){e.dispatch({type:te,topicId:t,user:i,idx:s})}(e,t,i,s)},InsertUserChange:function(t,i){wt(e,t,i)},DeleteUserById:function(t,i){Et(e,t,i)},InsertMessageById:function(t,i){Nt(e,t,i)},InsertMessagesById:function(t){yt(e,t)},updateMessageAddFile:function(t,i,s){!function(e,t,i,s){e.dispatch({type:ie,topic:t,file:i,sequence_id:s})}(e,t,i,s)},WebsocketUpdateStatus:function(t){!function(e,t){e.dispatch({type:T,status:t})}(e,t)},WebsocketUpdateWriter:function(e){!function(e){it=e}(e)},WebsocketReceiveData:function(t){dt(t,e)},WebsocketSendData:function(t){ft(e,t)},WebsocketSendChatMessage:function(t){Nt(e,t.msg.request.topic.id,{uuid:t.msg.uuid,status:z,message_type:B,sequence_id:0,message:t.msg.request.message,from:{user:{id:e.state.generalStates.SESSION_USER_INFO.id,name:e.state.generalStates.SESSION_USER_INFO.name}}}),function(e,t){Ot(e,L,"[SEND] "+JSON.stringify(t)),pt(e,t),void 0!==it?it(JSON.stringify(t)):console.log("[SEND-FAIL] WEBSOCKET WRITER IS NOT SET")}(e,t)},UpdateProfile:function(t,i){At(e,t,i)},addProfileImg:function(t,i,s){!function(e,t,i,s){e.dispatch({type:le,fileid:t,userid:i,img:s})}(e,t,i,s)},AddReply:function(t,i,s,n,c){Ct(e,t,i,s,n,c)},AddMention:function(t,i,s,n,c){Lt(e,t,i,s,n,c)}}},kt=i(0),Mt=Object(s.createContext)(Te),Dt=function(e){var t=e.children,i=Object(s.useReducer)(Ie,Te),n=Object(a.a)(i,2),c=n[0],o=n[1],r=function(e,t){return{generalActions:Rt({state:e,dispatch:t}),viewActions:(i={state:e,dispatch:t},{selecTopic:function(e){Tt(i,e)},getToast:function(e){It(i,e)},isShowCreateTopic:function(e){i.dispatch({type:be,isShow:e})},isShowChatMobile:function(e){i.dispatch({type:me,isShow:e})},isShowInvite:function(e){i.dispatch({type:he,isShow:e})},isShowChatUser:function(e){i.dispatch({type:Oe,isShow:e})},getAllTopics:function(e){i.dispatch({type:pe,topicsAll:e})},getTopicUsers:function(e){i.dispatch({type:je,topicUsers:e})},getImageBlob:function(e){i.dispatch({type:fe,sendImage:e})},isShowChatboxLoading:function(e){i.dispatch({type:de,isShow:e})},isHideSignup:function(e){i.dispatch({type:oe,isShow:e})},isHideLogin:function(e){i.dispatch({type:ce,isShow:e})},getProfileImg:function(e){i.dispatch({type:re,file:e})},getReplyContent:function(e){i.dispatch({type:ae,msg:e})},isShowPopupMessageItems:function(e,t){i.dispatch({type:ue,isShow:e,item:t})},isShowPopupNotify:function(e){i.dispatch({type:ge,isShow:e})},tempSaveMentionUsers:function(e){i.dispatch({type:_e,user:e})},tempSaveMsgForRelay:function(e){i.dispatch({type:Se,msg:e})},tempSaveMsgForMention:function(e){i.dispatch({type:ve,msg:e})},setReplyInfo:function(e){i.dispatch({type:"SET_REPLY_INFO",replies:e})},setMentionInfo:function(e){i.dispatch({type:"SET_MENTION_INFO",mentions:e})}})};var i}(c,o);return Object(s.useEffect)((function(){return console.log(c.generalStates)}),[c.generalStates]),Object(kt.jsx)(Mt.Provider,{value:{state:c,dispatch:o,actions:r},children:t})},qt=i(31),Ut=i.n(qt);i(256);function Pt(e){var t=e.isShowNavi,i=e.setIsShowNavi,n=Object(s.useContext)(Mt),c=n.state,o=(n.actions,c.generalStates.FRIENDS_ALL.find((function(e){return e.id===c.generalStates.SESSION_USER_INFO.id})));return o=!!o&&o.profile.img,Object(kt.jsxs)("header",{children:[Object(kt.jsxs)("div",{className:"userinfo",children:[Object(kt.jsx)("span",{className:"profile",children:o?Object(kt.jsx)("img",{src:o}):Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"})}),Object(kt.jsx)("span",{className:"name",children:c.generalStates.SESSION_USER_INFO.name})]}),Object(kt.jsxs)("div",{className:"btn_menu",isshow:1==t?"active":"",onClick:function(){return i(1!=t)},children:[Object(kt.jsx)("span",{}),Object(kt.jsx)("span",{}),Object(kt.jsx)("span",{})]})]})}var Ft=n.a.memo(Pt);function Wt(e){var t=e.children;return Object(kt.jsx)("div",{className:"wrapper",children:t})}var Yt=n.a.memo(Wt);function Gt(e){var t=e.children;return Object(kt.jsx)("div",{className:"Contents",children:t})}var Vt=n.a.memo(Gt),Bt=i(42),Ht=i.n(Bt),Jt=i(169),Kt=i.n(Jt);function Zt(e){var t=e.isShowNavi,i=e.setIsShowNavi,n=Object(s.useContext)(Mt),c=(n.state,n.actions);return Object(kt.jsxs)("div",{className:"navigation",isshow:1==t?"active":"",children:[Object(kt.jsx)("div",{className:"head"}),Object(kt.jsxs)("button",{className:"buttonbox",onClick:function(){c.viewActions.isShowCreateTopic(!0),i(!1)},children:[Object(kt.jsx)(Ht.a,{}),Object(kt.jsx)("span",{children:"\ubc29 \ub9cc\ub4e4\uae30"})]}),Object(kt.jsxs)("button",{className:"buttonbox",onClick:function(){window.confirm("\ub85c\uadf8\uc544\uc6c3 \ud558\uc2dc\uaca0\uc5b4\uc694 ?")&&(c.generalActions.WebsocketSendData(De()),c.viewActions.isHideLogin(!1),i(!1),localStorage.removeItem("chattingLoginKey"))},children:[Object(kt.jsx)(Kt.a,{}),Object(kt.jsx)("span",{children:"\ub85c\uadf8\uc544\uc6c3"})]})]})}var Xt=n.a.memo(Zt);function zt(){var e,t=Object(s.useContext)(Mt),i=t.state,n=t.actions;return Object(kt.jsx)("div",{className:"roomlist MyList",children:Object(kt.jsx)("ul",{children:null===(e=i.generalStates.TOPICS_MY)||void 0===e?void 0:e.map((function(e){return Object(kt.jsx)("li",{isactive:e.id==i.viewStates.selectopicid?"active":"",onClick:function(){n.viewActions.selecTopic(e.id),n.viewActions.isShowChatMobile(!0)},children:Object(kt.jsxs)("button",{id:e.id,children:[Object(kt.jsx)("p",{children:e.name}),Object(kt.jsxs)("span",{children:["\ubc29 \ubc88\ud638 : ",e.id]})]})},e.id)}))})})}var Qt=n.a.memo(zt),$t=i(16);function ei(e){var t=e.setViewType,i=Object(s.useContext)(Mt),n=i.state,c=i.actions,o=Object(s.useState)([]),r=Object(a.a)(o,2),l=r[0],u=r[1],d=Object(s.useCallback)((function(e){var t=e.topics,i=e.clickJoin;return 0!==t.length&&(null===t||void 0===t?void 0:t.map((function(e,t){return Object(kt.jsx)("li",{topicid:e.id,owner:e.owner,onClick:function(){return i(e.id)},children:Object(kt.jsxs)("button",{children:[Object(kt.jsx)("p",{children:e.name}),Object(kt.jsxs)("span",{children:["\ubc29 \ubc88\ud638 : ",e.id]})]})},t)})))}),[]);return Object(s.useEffect)((function(){var e=[];n.generalStates.TOPICS_ALL.forEach((function(t){var i,s=Object($t.a)(n.generalStates.TOPICS_MY);try{for(s.s();!(i=s.n()).done;){if(i.value.id===t.id)return}}catch(c){s.e(c)}finally{s.f()}e.push(t)})),u(e)}),[n.generalStates.TOPICS_ALL,n.generalStates.TOPICS_MY]),Object(kt.jsx)("div",{className:"roomlist AllList",children:Object(kt.jsx)("ul",{children:Object(kt.jsx)(d,{topics:l,clickJoin:function(e){var i;window.confirm("\uc774 \ubc29\uc5d0 \uc785\uc7a5\ud560\uae4c\uc694 ?")&&(c.generalActions.WebsocketSendData((i=e,{ctrl:{uuid:Le(),request:{what:"topic",how:"join",topic:{id:i}}}})),c.viewActions.selecTopic(e),c.viewActions.isShowChatMobile(!0),c.generalActions.WebsocketSendData(We(e)),c.viewActions.isShowChatboxLoading(!1),setTimeout((function(){c.viewActions.isShowChatboxLoading(!0)}),10),t("MyList"))}})})})}var ti=n.a.memo(ei),ii=i(23),si=i.n(ii),ni=function(e,t){return-1!==t.indexOf("spreadsheetml")?window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"})):-1!==t.indexOf("presentationml")?window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-powerpoint"})):-1!==t.indexOf("wordprocessingml")?window.URL.createObjectURL(new Blob([e.data],{type:"application/msword"})):window.URL.createObjectURL(new Blob([e.data],{type:"content-type"}))},ci=[];function oi(e,t,i,s){return ri.apply(this,arguments)}function ri(){return(ri=Object(rt.a)(ot.a.mark((function e(t,i,s,n){var c;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ci.find((function(e){return e.id===t}))){e.next=2;break}return e.abrupt("return");case 2:return ci.push({id:t}),c=i+"/api/v1/download/profile?file_id="+t,e.next=6,si()({method:"GET",url:c,responseType:"blob",headers:{Authorization:"Bearer "+s}}).then((function(e){var t=new FileReader;t.readAsDataURL(e.data),t.onload=function(){n(t.result)}})).catch((function(e){console.log("error === ".concat(e))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ai(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=Xe("NANOIT_CHAT_FRIENDS_ALL");return Object(s.useEffect)((function(){t.generalStates.FRIENDS_ALL.map((function(e,s){if(e.profile&&e.profile.file_id&&!e.profile.img){var c,o,r=null===(c=n.find((function(t){return t.id===e.id})))||void 0===c||null===(o=c.profile)||void 0===o?void 0:o.img;if(r)i.generalActions.addProfileImg(e.profile.file_id,e.id,r);else{oi(e.profile.file_id,t.generalStates.DEFAULT_CHAT_SERVER_URL,t.generalStates.SESSION_JWT_TOKEN,(function(t){i.generalActions.addProfileImg(e.profile.file_id,e.id,t),function(e,t){console.log("setLocalAddUserProfile");var i=Xe("NANOIT_CHAT_FRIENDS_ALL");if(i){var s=i.find((function(t){return t.id===e.id}));Ze("NANOIT_CHAT_FRIENDS_ALL",[].concat(Object(l.a)(i.filter((function(t){return t.id!==e.id}))),[Object(u.a)(Object(u.a)({},s),{},{profile:Object(u.a)(Object(u.a)({},s.profile),{},{img:t})})]))}}(e,t)})),console.log("profile images \uc694\uccad")}}}))}),[t.generalStates.FRIENDS_ALL]),Object(kt.jsx)("div",{className:"roomlist userList",children:Object(kt.jsx)("ul",{children:t.generalStates.FRIENDS_ALL.map((function(e,t){return Object(kt.jsx)("li",{children:Object(kt.jsxs)("button",{children:[Object(kt.jsx)("div",{className:"left",children:e.profile.img?Object(kt.jsx)("img",{src:e.profile.img}):Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"})}),Object(kt.jsxs)("div",{className:"right",children:[Object(kt.jsx)("p",{children:e.auth.name}),Object(kt.jsx)("span",{children:e.auth.email})]})]})},t)}))})})}var li=n.a.memo(ai),ui=i(171),di=i.n(ui),fi=i(172),ji=i.n(fi),pi=i(170),Oi=i.n(pi);function hi(e){var t=e.viewType,i=e.setViewType,s=function(e){return e===t?"active":""};return Object(kt.jsxs)("div",{className:"listNavi",children:[Object(kt.jsx)("button",{title:"\uc804\uccb4 \ud68c\uc6d0",className:s("UserList"),onClick:function(){return i("UserList")},children:Object(kt.jsx)(Oi.a,{})}),Object(kt.jsx)("button",{title:"\ubaa8\ub4e0 \ucc44\ud305\ubc29",className:s("AllList"),onClick:function(){return i("AllList")},children:Object(kt.jsx)(di.a,{})}),Object(kt.jsx)("button",{title:"\ub098\uc758 \ucc44\ud305\ubc29",className:s("MyList"),onClick:function(){return i("MyList")},children:Object(kt.jsx)(ji.a,{})})]})}var mi=n.a.memo(hi),bi=i(43),gi=i.n(bi);function _i(e){var t=e.setViewType,i=Object(s.useContext)(Mt),n=i.state,c=i.actions,o=Object(s.useState)(""),r=Object(a.a)(o,2),l=r[0],u=r[1],d=Object(s.useState)(!1),f=Object(a.a)(d,2),j=f[0],p=f[1],O=Object(s.useRef)();return Object(kt.jsx)("div",{className:"createTopic",isshow:!0===n.viewStates.isShowCreateTopic?"active":"",children:Object(kt.jsxs)("div",{children:[Object(kt.jsxs)("div",{className:"input_wrap",children:[Object(kt.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)},valuecheck:""!=l?"active":"",ref:O}),Object(kt.jsx)("p",{children:"\ubc29 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"})]}),Object(kt.jsxs)("label",{children:[Object(kt.jsx)("input",{type:"checkbox",name:"checkedA",checked:j,onChange:function(e){p(e.target.checked)}}),Object(kt.jsx)("span",{children:"\ube44\ubc00 \ubc29 \ub9cc\ub4e4\uae30"})]}),Object(kt.jsx)("button",{className:"btn_create",onClick:function(){c.generalActions.WebsocketSendData(function(e,t,i){return{ctrl:{uuid:Le(),request:{what:"topic",how:"create",who:t,private:i,topic:{name:e}}}}}(l,"alone",j)),alert(l+" \uc0c8\ub85c\uc6b4 \ucc44\ud305\ubc29\uc744 \ub9cc\ub4e4\uc5c8\uc5b4\uc694"),c.viewActions.isShowChatMobile(!0),c.viewActions.isShowCreateTopic(!1),t("MyList"),u(""),O.current.value=""},children:"\ubc29 \ub9cc\ub4e4\uae30"}),Object(kt.jsx)("button",{className:"btn_close_create",onClick:function(){return c.viewActions.isShowCreateTopic(!1)},children:Object(kt.jsx)(gi.a,{})})]})})}var Si=n.a.memo(_i);i(173);function vi(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=Object(s.useState)("UserList"),c=Object(a.a)(n,2),o=c[0],r=c[1];Object(s.useEffect)((function(){"AllList"===o&&i.generalActions.WebsocketSendData(qe())}),["AllList"===o]),Object(s.useEffect)((function(){"UserList"===o&&i.generalActions.WebsocketSendData(Pe())}),["UserList"===o]);var l=Object(s.useRef)();Object(s.useEffect)((function(){l.current.scrollTop=0}),[t.viewStates.isShowCreateTopic]);return Object(kt.jsxs)("div",{className:"list",ref:l,isoverflow:!0===t.viewStates.isShowCreateTopic?"hidden":"",children:[Object(kt.jsx)(mi,{viewType:o,setViewType:r}),"UserList"===o&&Object(kt.jsxs)(kt.Fragment,{children:[Object(kt.jsx)("div",{className:"list_title",children:"\uc804\uccb4 \ud68c\uc6d0"}),Object(kt.jsx)(li,{})]}),"AllList"===o&&Object(kt.jsxs)(kt.Fragment,{children:[Object(kt.jsx)("div",{className:"list_title",children:"\uc804\uccb4 \ucc44\ud305"}),Object(kt.jsx)(ti,{setViewType:r})]}),"MyList"===o&&Object(kt.jsxs)(kt.Fragment,{children:[Object(kt.jsx)("div",{className:"list_title",children:"\ub098\uc758 \ucc44\ud305"}),Object(kt.jsx)(Qt,{})]}),Object(kt.jsx)(Si,{setViewType:r}),Object(kt.jsx)("button",{className:"btn_create_mobile",onClick:function(){return i.viewActions.isShowCreateTopic(!0)},children:Object(kt.jsx)(Ht.a,{})})]})}var xi=n.a.memo(vi),wi=i(174),Ei=i.n(wi),Ni=i(176),yi=i.n(Ni),Ti=i(175),Ii=i.n(Ti),Ai=i(177),Ci=i.n(Ai);function Li(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions;return Object(kt.jsxs)("div",{className:"chatHeader",children:[Object(kt.jsx)("button",{title:"\ub2e4\ub978 \ucc44\ud305\ubc29 \ubaa9\ub85d\ubcf4\uae30",className:"btn_closechat",onClick:function(){return i.viewActions.isShowChatMobile(!1)},children:Object(kt.jsx)(Ei.a,{})}),Object(kt.jsx)("button",{title:"\ucc44\ud305\ubc29 \ucc38\uc5ec\uc790 \ubaa9\ub85d",className:"btn_member",onClick:function(){return i.viewActions.isShowChatUser(!0)},children:Object(kt.jsx)(Ii.a,{})}),Object(kt.jsx)("button",{title:"\ucc44\ud305\ubc29\uc5d0 \ucd08\ub300",className:"btn_invite",onClick:function(){return i.viewActions.isShowInvite(!0)},children:Object(kt.jsx)(yi.a,{})}),Object(kt.jsx)("button",{title:"\ucc44\ud305\ubc29 \ub098\uac00\uae30",className:"btn_exit",onClick:function(){var e;window.confirm("\uc774 \ucc44\ud305\ubc29\uc744 \ub098\uac00\uc2dc\uaca0\uc5b4\uc694?")&&(i.generalActions.WebsocketSendData((e=t.viewStates.selectopicid,{ctrl:{uuid:Le(),request:{what:"topic",how:"leave",topic:{id:e}}}})),i.viewActions.isShowChatMobile(!1))},children:Object(kt.jsx)(Ci.a,{})})]})}var Ri=n.a.memo(Li),ki=i(178),Mi=i.n(ki);var Di=function(e){var t=e.setIsShowPopupMessage,i=e.getClickMessage,n=e.whoIsClickMsg,c=Object(s.useContext)(Mt),o=(c.state,c.actions),r=function(){return t(!1)},a=Object(s.useRef)();return Object(kt.jsxs)("div",{className:"popupMessage",children:[Object(kt.jsxs)("div",{className:"con",children:[!i.file&&Object(kt.jsxs)(kt.Fragment,{children:[Object(kt.jsx)("button",{onClick:function(){a.current.select(),document.execCommand("copy"),r()},children:"\ubcf5\uc0ac"}),Object(kt.jsx)("input",{type:"text",value:i.content,className:"input_msg_copy",ref:a,readOnly:!0})]}),"left"===n&&Object(kt.jsx)("button",{onClick:function(){o.viewActions.isShowPopupMessageItems(!0,"reply"),r()},children:"\ub2f5\uc7a5"}),i.file&&Object(kt.jsx)("button",{onClick:function(){o.viewActions.isShowPopupMessageItems(!0,"relay"),o.viewActions.tempSaveMsgForRelay(i),r()},children:"\uc804\ub2ec"}),Object(kt.jsx)("button",{onClick:function(){r()},children:"\uc0ad\uc81c"})]}),Object(kt.jsx)("div",{className:"bg",onClick:r})]})},qi=i(51),Ui=i.n(qi);function Pi(){var e,t,i=Object(s.useContext)(Mt),n=i.state,c=i.actions,o=Object(s.useState)(""),r=Object(a.a)(o,2),l=r[0],u=r[1],d=Object(s.useState)(!1),f=Object(a.a)(d,2),j=f[0],p=f[1],O=Object(s.useState)(""),h=Object(a.a)(O,2),m=h[0],b=h[1],g=Object(s.useState)("right"),_=Object(a.a)(g,2),S=_[0],v=_[1],x=Object(s.useRef)(),w=n.generalStates.SESSION_USER_INFO.id,E=n.viewStates.selectopicid,N=Qe(w,E),y=n.generalStates.TOPICS_MY.filter((function(e){return e.id===E}))[0],T=Object(s.useCallback)((function(e,t){b(e),p(!0),c.viewActions.isShowPopupMessageItems(!1,"reply"),"left"===t?(v("left"),c.viewActions.getReplyContent({from_user_id:e.from_user_id,from_user_name:e.from_user_name,content:e.content,sequence_id:e.sequence_id})):v("right")}),[]),I=function(e,t,i){if(e&&t&&i&&!y.messages[e].file)try{return si()({method:"GET",url:n.generalStates.DEFAULT_CHAT_SERVER_URL+"/api/v1/download/file?file_id="+t,responseType:"image"===i?"blob":"arraybuffer",headers:{Authorization:"Bearer "+n.generalStates.SESSION_JWT_TOKEN}})}catch(s){console.log(s)}},A=function(e,i,s){"mousedown"===s?t=setTimeout((function(){return T(e,i)}),1e3):clearTimeout(t)},C=Object(s.useCallback)((function(e){var t=document.getElementById(e);t.classList.add("active"),setTimeout((function(){return t.classList.remove("active")}),1e3)}),[]),L=Object(s.useCallback)((function(e,t){var i,s,n=!1,c="";return(null===e||void 0===e||null===(i=e.custom)||void 0===i||null===(s=i.notify.reply)||void 0===s?void 0:s.sequence_id)&&(n=!0,c=null===t||void 0===t?void 0:t.find((function(t){var i;return t.sequence_id===(null===e||void 0===e||null===(i=e.custom)||void 0===i?void 0:i.notify.reply.sequence_id)}))),c?{reply_message:c,reply_id:"reply_".concat(c.topic_id,"_").concat(c.sequence_id),is_reply:n}:Object(kt.jsx)("p",{})}),[]),R=function(){var e=Object(rt.a)(ot.a.mark((function e(){var t,i,s;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null===y||void 0===y?void 0:y.messages,i=ot.a.mark((function e(i){var s,n,c,o,r,a,l,u,d;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t[i].content.split(":")[1],r=null===(s=t[i].content)||void 0===s?void 0:s.split("/")[0],!(null===(n=t[i])||void 0===n?void 0:n.file)){e.next=4;break}return e.abrupt("return","continue");case 4:if(o||r){e.next=6;break}return e.abrupt("return","continue");case 6:if(!N.length||!(null===(c=N.messages[i])||void 0===c?void 0:c.file)){e.next=12;break}return t[i].file=N.messages[i].file,console.log("\ub85c\uceec\uc2a4\ud1a0\ub9ac\uc9c0\uc5d0\uc11c \uc774\ubbf8\uc9c0 \uac00\uc838\uc640\uc11c store\uc5d0 \uc800\uc7a5"),e.abrupt("return","continue");case 12:if(t[i].file="","image"!==r){e.next=22;break}return e.next=16,I(i,o,"image");case 16:a=e.sent,(l=new FileReader).readAsDataURL(a.data),l.onloadend=function(){return t[i].file=l.result},e.next=28;break;case 22:if("application"!==r&&"text"!==r){e.next=28;break}return e.next=25,I(i,o,"other");case 25:u=e.sent,d=ni(u,t[i].content),t[i].file=d;case 28:case"end":return e.stop()}}),e)})),s=0;case 3:if(!(s<(null===t||void 0===t?void 0:t.length))){e.next=11;break}return e.delegateYield(i(s),"t0",5);case 5:if("continue"!==e.t0){e.next=8;break}return e.abrupt("continue",8);case 8:s++,e.next=3;break;case 11:setTimeout((function(){u(y)}),10);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=Object(s.useCallback)((function(){setTimeout((function(){var e=x.current,t=e.scrollHeight,i=e.clientHeight;x.current.scrollTop=t-i}),1)}),[]);Object(s.useEffect)((function(){var e;(null===y||void 0===y||null===(e=y.messages)||void 0===e?void 0:e.find((function(e){return!!e.content.split(":")[1]||!!e.content.split("/")[0]})))&&R()}),[n.viewStates.selectopicid]),Object(s.useEffect)((function(){k()}),[l,y]);var M=function(e){var t=e.msg,i=t.content.split("/")[0],s=t.content.split(":")[1];return"image"===i?Object(kt.jsx)("img",{src:t.file}):Object(kt.jsx)("div",{children:Object(kt.jsxs)("a",{href:t.file,className:"btn_filedownload",download:"file_".concat(s),children:[Object(kt.jsxs)("div",{className:"filedown_text",children:[Object(kt.jsx)("p",{children:"\ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc"}),"file_".concat(s)]}),Object(kt.jsx)(Mi.a,{className:"icon_download"})]})})},D=Object(s.useCallback)((function(e){return e.msg.content.split(" ").map((function(e,t){return n.generalStates.FRIENDS_ALL.find((function(t){return"@".concat(t.auth.name)===e}))?Object(kt.jsx)("button",{children:e},t):e}))}),[n.generalStates.FRIENDS_ALL]),q=Object(s.useCallback)((function(e){var t=e.msg,i=e.messages,s=L(t,i),c=s.reply_message,o=s.reply_id,r=s.is_reply,a=n.generalStates.FRIENDS_ALL.find((function(e){return e.id===t.from_user_id}));return a=!!a&&a.profile.img,Object(kt.jsxs)("li",{className:"msg_outer left user",id:"reply_".concat(t.topic_id,"_").concat(t.sequence_id),children:[Object(kt.jsx)("div",{className:"msg_left_profile",children:a?Object(kt.jsx)("img",{src:a}):Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"})}),Object(kt.jsxs)("div",{className:"msg_left_userinfo",children:[Object(kt.jsx)("div",{className:"top_name",children:t.from_user_name}),Object(kt.jsx)("div",{className:"btm_msg",children:Object(kt.jsxs)("div",{className:"msg_inner",onClick:function(){return!!c&&C(o)},onMouseUp:function(){return A(t,"left","mouseup")},onMouseDown:function(){return A(t,"left","mousedown")},children:[!0===r&&Object(kt.jsxs)("a",{className:"msg_reply",href:"#".concat(o),children:[c.from_user_name,"\uc5d0\uac8c \ub2f5\uc7a5",Object(kt.jsx)("br",{}),c.reply_content]}),Object(kt.jsxs)("div",{className:"msg",children:[!0===r&&Object(kt.jsx)(Ui.a,{className:"icon_reply"}),-1!==t.content.indexOf("@")||t.file?-1!==t.content.indexOf("@")?Object(kt.jsx)(D,{msg:t}):Object(kt.jsx)(M,{msg:t}):t.content]})]})})]})]})}),[n.generalStates.FRIENDS_ALL,y]),U=Object(s.useCallback)((function(e){var t=e.msg;return Object(kt.jsx)("li",{className:"msg_outer center",children:Object(kt.jsx)("div",{className:"msg_inner",children:Object(kt.jsx)("div",{className:"msg",children:t.content})})})}),[]),P=Object(s.useCallback)((function(e){var t=e.msg,i=e.messages,s=L(t,i),n=s.reply_message,c=s.reply_id,o=s.is_reply;return Object(kt.jsx)("li",{className:"msg_outer right me",id:"reply_".concat(t.topic_id,"_").concat(t.sequence_id),children:Object(kt.jsxs)("div",{className:"msg_inner",onClick:function(){return!!n&&C(c)},onMouseDown:function(){return A(t,"right","mousedown")},onMouseUp:function(){return A(t,"right","mouseup")},children:[!0===o&&Object(kt.jsxs)("a",{className:"msg_reply",href:"#".concat(c),children:[n.from_user_name,"\uc5d0\uac8c \ub2f5\uc7a5",Object(kt.jsx)("br",{}),n.content]}),Object(kt.jsxs)("div",{className:"msg",children:[!0===o&&Object(kt.jsx)(Ui.a,{className:"icon_reply"}),-1!==t.content.indexOf("@")||t.file?-1!==t.content.indexOf("@")?Object(kt.jsx)(D,{msg:t}):Object(kt.jsx)(M,{msg:t}):t.content]})]})})}),[n.generalStates.FRIENDS_ALL]);return Object(kt.jsxs)(kt.Fragment,{children:[Object(kt.jsx)("div",{className:"chatReciever",ref:x,isshow:!0===n.viewStates.isChatboxLoading?"active":"",children:Object(kt.jsx)("ul",{children:null===y||void 0===y||null===(e=y.messages)||void 0===e?void 0:e.map((function(e,t){return"ctrl"==e.message_type?Object(kt.jsx)(U,{msg:e},t):!!e.content&&(e.from_user_id===w?Object(kt.jsx)(P,{msg:e,messages:y.messages},t):Object(kt.jsx)(q,{msg:e,messages:y.messages},t))}))})}),!0===j&&Object(kt.jsx)(Di,{setIsShowPopupMessage:p,getClickMessage:m,whoIsClickMsg:S})]})}var Fi=n.a.memo(Pi),Wi=i(59),Yi=i.n(Wi),Gi=i(183),Vi=i.n(Gi),Bi=i(184),Hi=i.n(Bi),Ji=i(179);function Ki(e){var t=e.viewEmoji,i=e.setViewEmoji,n=e.setHaveEmoji,c=Object(s.useCallback)((function(){return Ji.emoji.map((function(e,t){return Object(kt.jsx)("li",{onClick:function(){n(e),i(!1)},children:e},t)}))}),[]);return Object(kt.jsx)("div",{className:"emoji",children:Object(kt.jsx)("div",{className:"popup_emoji",isshow:1==t?"active":"",children:Object(kt.jsx)("ul",{children:Object(kt.jsx)(c,{})})})})}var Zi=n.a.memo(Ki),Xi=function(e,t,i){return{msg:{uuid:Le(),request:{what:"message",how:"send",using:"file",topic:{id:e},file:{id:t},mime:i}}}};var zi=function(e){var t=e.msgRef,i=e.setShowSearchUsers,n=Object(s.useContext)(Mt),c=n.state,o=n.actions,r=function(){return Object(kt.jsx)("ul",{children:c.generalStates.TOPICS_MY.filter((function(e){return e.id===c.viewStates.selectopicid}))[0].users.map((function(e,s){var n,r;if(e&&e.id!==c.generalStates.SESSION_USER_INFO.id)return Object(kt.jsx)("li",{children:Object(kt.jsxs)("button",{onClick:function(){return function(e){o.viewActions.tempSaveMentionUsers(e),i(!1),t.current.focus()}(e)},children:[(null===e||void 0===e||null===(n=e.profile)||void 0===n?void 0:n.file_id)?Object(kt.jsx)("img",{src:c.generalStates.FRIENDS_ALL.find((function(t){var i;return t.profile.file_id===(null===(i=e.profile)||void 0===i?void 0:i.file_id)})).profile.img}):Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"}),null===(r=e.auth)||void 0===r?void 0:r.name]})},s)}))})};return Object(kt.jsxs)("div",{className:"searchUsers",children:[Object(kt.jsxs)("h3",{children:[Object(kt.jsx)("span",{children:"\uc0ac\uc6a9\uc790 \ucc3e\uae30"}),Object(kt.jsx)("button",{onClick:function(){return i(!1)},children:Object(kt.jsx)(gi.a,{})})]}),Object(kt.jsx)(r,{})]})};var Qi=function(){var e=Object(s.useContext)(Mt),t=e.state;return e.actions,Object(kt.jsxs)("div",{className:"ItemReply",children:[Object(kt.jsxs)("div",{className:"top",children:[Object(kt.jsx)(Ui.a,{className:"icon_reply"}),Object(kt.jsxs)("span",{children:[t.viewStates.replyContent.from_user_name," \uc5d0\uac8c \ub2f5\uc7a5"]})]}),Object(kt.jsx)("div",{className:"btm",children:Object(kt.jsx)("span",{children:t.viewStates.replyContent.content})})]})},$i=i(181),es=i.n($i),ts=i(182),is=i.n(ts),ss=i(180),ns=i.n(ss);var cs=function(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=Object(s.useState)("topic"),c=Object(a.a)(n,2),o=c[0],r=c[1],l=Object(s.useRef)([]);return Object(kt.jsxs)("div",{className:"ItemRelay",children:[Object(kt.jsx)("div",{className:"top",children:Object(kt.jsx)("span",{children:"\uc804\ub2ec\ud558\uae30"})}),Object(kt.jsxs)("div",{className:"mid",children:[Object(kt.jsx)("div",{className:"tab",children:Object(kt.jsx)("button",{className:"topic"===o?"active":"",onClick:function(){return r("topic")},children:"\ub0b4 \ucc44\ud305\ubc29"})}),Object(kt.jsx)("div",{className:"relaylist",children:Object(kt.jsx)("ul",{children:"topic"===o&&t.generalStates.TOPICS_MY.map((function(e,t){return Object(kt.jsx)("li",{children:Object(kt.jsxs)("label",{children:[Object(kt.jsx)(ns.a,{className:"icon_room"}),Object(kt.jsx)("p",{className:"name",children:e.name}),Object(kt.jsx)("input",{type:"radio",ref:function(e){return l.current[t]=e},name:"input_relay",value:e.id}),Object(kt.jsx)(es.a,{className:"checkicon icon_unchecked"}),Object(kt.jsx)(is.a,{className:"checkicon icon_checked"})]})},e.id)}))})})]}),Object(kt.jsxs)("div",{className:"btm",children:[Object(kt.jsx)("button",{onClick:function(){"user"===o||"topic"===o&&function(){var e,s,n=Number(null===(e=l.current.find((function(e){return!0===e.checked})))||void 0===e?void 0:e.value);if(n){i.viewActions.selecTopic(n);var c=t.generalStates.TOPICS_MY.find((function(e){return e.id===t.viewStates.msgForRelay.topic_id})),o=null===c||void 0===c||null===(s=c.messages)||void 0===s?void 0:s.filter((function(e){return e.sequence_id===t.viewStates.msgForRelay.sequence_id})),r=o[0].content.split(":")[1],a=o[0].content.split(":")[0];i.generalActions.WebsocketSendData(Xi(t.viewStates.msgForRelay.topic_id,r,a)),i.generalActions.WebsocketSendData(Ye(t.viewStates.msgForRelay.topic_id,String(a+":"+r))),i.viewActions.getToast("\uba54\uc2dc\uc9c0\uac00 \uc804\ub2ec\ub418\uc5c8\uc5b4\uc694"),i.viewActions.isShowPopupMessageItems(!1,"relay")}}()},className:"btn_submit",children:"\uc804\ub2ec"}),Object(kt.jsx)("button",{onClick:function(){i.viewActions.isShowPopupMessageItems(!1,"relay")},className:"btn_cancel",children:"\ucde8\uc18c"})]})]})};function os(){var e,t=Object(s.useContext)(Mt),i=t.state,n=t.actions,c=Object(s.useState)(!1),o=Object(a.a)(c,2),r=o[0],l=o[1],u=Object(s.useState)(""),d=Object(a.a)(u,2),f=d[0],j=d[1],p=Object(s.useState)(""),O=Object(a.a)(p,2),h=O[0],m=O[1],b=Object(s.useState)(!1),g=Object(a.a)(b,2),_=g[0],S=g[1],v=Object(s.useRef)(),x=Object(s.useRef)();Object(s.useEffect)((function(){var e=x.current.value.concat(f);m(e),x.current.value=x.current.value+f}),[f]),Object(s.useEffect)((function(){var e,t=null===(e=i.viewStates.mentionUsers[i.viewStates.mentionUsers.length-1])||void 0===e?void 0:e.name,s=t?"".concat(t," "):"",n=x.current.value.concat(s);m(n)}),[i.viewStates.mentionUsers]),Object(s.useEffect)((function(){var e=v.current,t=e.scrollHeight,i=e.clientHeight;v.current.scrollTop=t-i}),[h]);var w=Object(s.useCallback)((function(){if(-1!==h.indexOf("@")){var e,t=[],s=i.generalStates.TOPICS_MY.find((function(e){return e.id===i.viewStates.selectopicid}));Number(s.messages[s.messages.length-1].sequence_id);null===(e=s.users)||void 0===e||e.map((function(e,i){var s;(null===(s=e.auth)||void 0===s?void 0:s.name)&&(h.split(" ").find((function(t){return t==="@".concat(e.auth.name)}))&&t.push({id:e.id,name:e.auth.name}))}))}}),[h]),E=Object(s.useCallback)((function(e){m(e.target.value),-1===x.current.value.indexOf("@")&&S(!1)}),[]),N=Object(s.useCallback)((function(){if(h){var e="",t=null,s=null,c=null,o=function(t){var s=!1,n=[];return-1!==h.indexOf("@")&&(e="mention"===t?"mention":"reply-mention",s=!0,h.split(" ").map((function(e,t){var s=i.generalStates.FRIENDS_ALL.find((function(t){return"@".concat(t.auth.name)===e}));s&&n.push(s)}))),{isMention:s,usersId:n}};if(!0===i.viewStates.popupMessageItems.reply){var r=o("reply-mention"),a=r.isMention,l=r.usersId;a&&(t=l),e="reply",s=i.viewStates.replyContent.from_user_id,c=i.viewStates.replyContent.sequence_id}else{var u=o("mention"),d=u.isMention,f=u.usersId;d&&(t=f)}n.generalActions.WebsocketSendData(Ye(i.viewStates.selectopicid,h,e,t,s,c)),n.viewActions.isShowPopupMessageItems(!1,"reply"),w(),m(""),x.current.value="",n.viewActions.tempSaveMentionUsers("")}}),[h]);return Object(kt.jsxs)("div",{className:"chatSender",ref:v,children:[Object(kt.jsx)("button",{title:"\ud30c\uc77c/\uc774\ubbf8\uc9c0 \ucca8\ubd80",className:"btn_sendfile",onChange:function(e){if(""!=e.target.value)if(-1!==(t=e.target.files[0].name).indexOf(".doc")||-1!==t.indexOf(".pdf")||-1!==t.indexOf(".ppt")||-1!==t.indexOf(".xls")||-1!==t.indexOf(".txt")||-1!==t.indexOf(".jpg")||-1!==t.indexOf(".jpeg")||-1!==t.indexOf(".png")||-1!==t.indexOf(".gif")){var t,s=i.viewStates.selectopicid,c=i.generalStates.DEFAULT_CHAT_SERVER_URL+"/api/v1/upload/file?topic_id="+s,o=new FormData;o.append("file",e.target.files[0]),si()({method:"POST",url:c,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+i.generalStates.SESSION_JWT_TOKEN},data:o}).then((function(e){try{var t=e.data,c=e.status,o=e.statusText,r=e.data.file.response.file.mime,a=t.file.response.file.id;n.generalActions.Logger(R,"[SEND] post file upload success, STATUS:"+c),n.generalActions.Logger(R,"[SEND] post file upload success, STATUS_TEXT:"+o),n.generalActions.Logger(R,"[SEND] post file upload success, DATA:"+JSON.stringify(t)),n.generalActions.WebsocketSendData(Xi(s,a,r)),n.generalActions.WebsocketSendData(Ye(i.viewStates.selectopicid,String(r+":"+a)))}catch(l){l.response?n.generalActions.Logger(R,"[SEND] post file upload fail : "+l.response.status+", "+l.response.statusText+", "+JSON.stringify(l.response.data)):l.request?n.generalActions.Logger(R,"[SEND] post file upload fail, response receive fail"):n.generalActions.Logger(R,"[SEND] post file upload fail, catch fail1"+l.message),n.generalActions.Logger(R,"[SEND] post file upload fail, catch fail2"+l.config)}})).catch((function(e){console.log("error======"+e)})),e.target.value=""}else n.viewActions.getToast("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud30c\uc77c\ud615\uc2dd\uc774\uc5d0\uc694.")},children:Object(kt.jsx)("form",{method:"POST",className:"uploadForm",children:Object(kt.jsxs)("label",{children:[Object(kt.jsx)(Vi.a,{}),Object(kt.jsx)("input",{type:"file",className:"file_sendfile"})]})})}),Object(kt.jsx)("button",{title:"\uc774\ubaa8\uc9c0",className:"btn_emoji",onClick:function(){return l(1!=r)},children:Object(kt.jsx)(Hi.a,{})}),Object(kt.jsx)("div",{className:"input_inner",children:Object(kt.jsx)("input",{type:"text",className:"input_send_msg",placeholder:"\uba54\uc2dc\uc9c0 \uc785\ub825",onChange:E,onKeyDown:function(e){var t;t=e.key,S("@"===t),"Enter"===e.key&&N()},value:h,ref:x})}),Object(kt.jsx)("button",{title:"\uba54\uc2dc\uc9c0 \uc804\uc1a1",className:"btn_sendmsg",onClick:N,children:Object(kt.jsx)(Yi.a,{className:(null===x||void 0===x||null===(e=x.current)||void 0===e?void 0:e.value)?"icon_send_msg active":"icon_send_msg"})}),Object(kt.jsx)(Zi,{viewEmoji:r,setViewEmoji:l,setHaveEmoji:j}),!0===_&&Object(kt.jsx)(zi,{msgRef:x,setShowSearchUsers:S}),!0===i.viewStates.popupMessageItems.reply&&Object(kt.jsx)(Qi,{}),!0===i.viewStates.popupMessageItems.relay&&Object(kt.jsx)(cs,{})]})}var rs=n.a.memo(os),as=i(185),ls=i.n(as);function us(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=Object(s.useState)([]),c=Object(a.a)(n,2),o=c[0],r=c[1],l=t.generalStates.TOPICS_MY.filter((function(e){return e.id===t.viewStates.selectopicid}))[0];Object(s.useEffect)((function(){!1===t.viewStates.isShowInvite&&r([])}),[t.viewStates.isShowInvite]);var u=function(e){var i,s=e.topic,n=e.chkUser,c=e.clickUser,o=[];return null===s||void 0===s||null===(i=s.users)||void 0===i||i.forEach((function(e){void 0!==e&&o.push(e.id)})),t.generalStates.FRIENDS_ALL.map((function(e,i){return-1===o.indexOf(e.id)&&Object(kt.jsxs)("button",{onClick:function(){return c(e.id)},children:[Object(kt.jsxs)("div",{className:"left",children:[e.profile.file_id?Object(kt.jsx)("img",{src:t.generalStates.FRIENDS_ALL.find((function(t){return t.profile.file_id===e.profile.file_id})).profile.img}):Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"}),Object(kt.jsx)("span",{children:e.auth.name})]}),Object(kt.jsx)("div",{className:"right",children:n.indexOf(e.id)>-1&&Object(kt.jsx)(ls.a,{className:"icon_check"})})]},i)}))};return Object(kt.jsxs)("div",{className:"popup_invite popup_right",isshow:1==t.viewStates.isShowInvite?"active":"",children:[Object(kt.jsxs)("div",{className:"invite_header",children:[Object(kt.jsx)("button",{onClick:function(){return i.viewActions.isShowInvite(!1)},children:"\ucde8\uc18c"}),Object(kt.jsx)("button",{onClick:function(){o.map((function(e){var s,n;i.generalActions.WebsocketSendData((s=e,n=t.viewStates.selectopicid,{ctrl:{uuid:Le(),request:{what:"topic",how:"invite",user:{id:s},topic:{id:n}}}}))})),0!==o.length?i.viewActions.isShowInvite(!1):i.viewActions.getToast("\ucd08\ub300\ud560 \uc0ac\uc6a9\uc790\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694")},className:"btn_confirm",children:"\uc644\ub8cc"})]}),Object(kt.jsxs)("div",{className:"numbox",children:[Object(kt.jsx)("span",{className:"num",children:o.length}),Object(kt.jsx)("span",{children:"\uba85 \ucd08\ub300"})]}),Object(kt.jsx)(u,{topic:l,chkUser:o,clickUser:function(e){var t=o.indexOf(e),i=o.slice();-1===t?r(o.concat(e)):(i.splice(t,1),r(i))}})]})}var ds=n.a.memo(us);function fs(){var e,t,i=Object(s.useContext)(Mt),n=i.state,c=i.actions,o=n.generalStates.TOPICS_MY.filter((function(e){return e.id===n.viewStates.selectopicid}))[0];Object(s.useEffect)((function(){o=n.generalStates.TOPICS_MY.filter((function(e){return e.id===n.viewStates.selectopicid}))[0]}),[n.generalStates.TOPICS_MY,n.generalStates.FRIENDS_ALL]);var r=Object(s.useCallback)((function(){var e,t;return Object(kt.jsx)("ul",{children:null===(e=o)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.map((function(e,t){var i,s;if(e)return Object(kt.jsxs)("li",{children:[Object(kt.jsxs)("div",{className:"left",children:[void 0==(null===e||void 0===e||null===(i=e.profile)||void 0===i?void 0:i.file_id)?Object(kt.jsx)("img",{src:"images/noimg.jpg",alt:"profile noimg"}):Object(kt.jsx)("img",{src:n.generalStates.FRIENDS_ALL.find((function(t){var i;return t.profile.file_id===(null===(i=e.profile)||void 0===i?void 0:i.file_id)})).profile.img}),null===e||void 0===e||null===(s=e.auth)||void 0===s?void 0:s.name]}),Object(kt.jsx)("div",{className:"right",children:o.owner===e.id&&"\ubc29\uc7a5"})]},t)}))})}),[n.viewStates.isShowChatUser]);return Object(kt.jsxs)("div",{className:"popup_right popup_users",isshow:1==n.viewStates.isShowChatUser?"active":"",children:[Object(kt.jsxs)("div",{className:"Chatuser_header",children:[Object(kt.jsx)("button",{onClick:function(){return c.viewActions.isShowChatUser(!1)},className:"btn_confirm",children:"\ud655\uc778"}),Object(kt.jsxs)("div",{className:"numbox",children:[Object(kt.jsx)("span",{className:"num",children:null===(e=o)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.length}),Object(kt.jsx)("span",{children:"\uba85 \ucc38\uc5ec\uc911"})]})]}),Object(kt.jsx)(r,{})]})}var js=n.a.memo(fs);function ps(e){var t=e.isshow;return Object(kt.jsx)("div",{className:"emptyCover",isshow:t,children:Object(kt.jsx)("h2",{children:"hello !"})})}var Os=n.a.memo(ps);function hs(){var e=Object(s.useContext)(Mt),t=e.state;e.actions;return Object(kt.jsxs)("div",{className:"chat",isshow:!0===t.viewStates.isShowChatMobile?"active":"",children:[Object(kt.jsxs)("div",{className:"chatWrap",children:[Object(kt.jsx)(Ri,{}),Object(kt.jsx)(Fi,{}),Object(kt.jsx)(rs,{})]}),Object(kt.jsx)(ds,{}),Object(kt.jsx)(js,{}),Object(kt.jsx)(Os,{isshow:!0===t.viewStates.isShowChatMobile?"":"active"})]})}var ms=n.a.memo(hs),bs=i(61);var gs=function(){var e=Object(s.useContext)(Mt),t=(e.state,e.actions),i=Object(s.useState)(""),c=Object(a.a)(i,2),o=c[0],r=c[1],l=Object(s.useCallback)((function(){t.viewActions.isHideSignup(!0)}),[]),d=Object(bs.a)(),f=d.register,j=d.handleSubmit,p=(d.watch,d.formState.errors);return Object(kt.jsx)("div",{className:"signup",children:Object(kt.jsxs)("div",{className:"signup_inner",children:[Object(kt.jsx)("h3",{children:"\ud68c\uc6d0\uac00\uc785"}),Object(kt.jsxs)("label",{className:"add_propfile",children:[Object(kt.jsx)("input",{type:"file",onChange:function(e){if(e.target.files&&e.target.files[0]){var i=window.URL.createObjectURL(new Blob([e.target.files[0]],{type:"img"}));r(n.a.createElement("img",{src:i})),t.viewActions.getProfileImg(e.target.files[0])}else r(""),t.viewActions.getProfileImg("")}}),Object(kt.jsx)(Ht.a,{className:"icon_profile"}),o]}),Object(kt.jsx)("p",{className:"text_profile",children:"\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ub4f1\ub85d"}),Object(kt.jsxs)("form",{onSubmit:j((function(e){var i,s,n;p.name?t.viewActions.getToast("\uc815\ubcf4\ub97c \ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694"):t.generalActions.WebsocketSendData((i=e.name,s=e.email,n=e.password,{auth:{uuid:Le(),request:{what:"user",how:"register",user:{auth:{name:i,email:s,password:n}},device_info:Re()}}}))})),children:[Object(kt.jsx)("input",Object(u.a)({type:"text",placeholder:"\uc774\ub984",className:"input_common"},f("name",{required:!0}))),Object(kt.jsx)("input",Object(u.a)({autoComplete:"username",type:"email",placeholder:"\uc774\uba54\uc77c",className:"input_common"},f("email",{required:!0}))),Object(kt.jsx)("input",Object(u.a)({autoComplete:"current-password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",className:"input_common"},f("password",{required:!0}))),Object(kt.jsx)("button",{className:"btn_signup",type:"submit",value:"submit",children:"\ud68c\uc6d0\uac00\uc785"})]}),Object(kt.jsx)("button",{className:"btn_login",onClick:l,children:"\ub85c\uadf8\uc778 \ud560\ub798\uc694"})]})})};function _s(){return Object(kt.jsx)("div",{className:"cat",children:Object(kt.jsx)("div",{className:"content",children:Object(kt.jsx)("div",{className:"container",children:Object(kt.jsxs)("svg",{id:"bongo-cat",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 787.3 433.8",children:[Object(kt.jsxs)("defs",{children:[Object(kt.jsxs)("symbol",{id:"eye","data-name":"eye",viewBox:"0 0 19.2 18.7",children:[Object(kt.jsx)("circle",{cx:"9.4",cy:"9.1",r:"8"}),Object(kt.jsx)("path",{d:"M16.3,5.1a1.3,1.3,0,0,1-1.4-.3,7.2,7.2,0,0,0-4.5-2.6A7.2,7.2,0,0,0,5.5,3.5,6.8,6.8,0,0,0,2.8,7.8a6.8,6.8,0,0,0,1,4.8,6.2,6.2,0,0,0,4,2.7,6.1,6.1,0,0,0,4.6-.7,6.7,6.7,0,0,0,2.9-3.7,6.4,6.4,0,0,0-.5-4.5c-.1-.2.8-1,1.5-1.3s2.2,0,2.3.5a9.4,9.4,0,0,1-.2,7.2,9.4,9.4,0,0,1-5.1,5.1,9,9,0,0,1-7,.2A9.6,9.6,0,0,1,1,13.5,9.2,9.2,0,0,1,.4,6.6,8.9,8.9,0,0,1,4.6,1.3,9,9,0,0,1,11.2.2,9.3,9.3,0,0,1,16.7,4C16.9,4.3,17,4.8,16.3,5.1Z"})]}),Object(kt.jsx)("symbol",{id:"paw-pads","data-name":"paw-pads",viewBox:"0 0 31.4 33.9",children:Object(kt.jsx)("path",{d:"M6.8,16a3.7,3.7,0,0,1,1.1,2.8,3.2,3.2,0,0,1-1.6,2.6L5,21.8H4.4a2.8,2.8,0,0,1-1.8.3A4.2,4.2,0,0,1,.2,19.1,7.7,7.7,0,0,1,0,17.6a2.8,2.8,0,0,1,.6-2,3.2,3.2,0,0,1,2.1-.8H4A5,5,0,0,1,6.8,16Zm7.3-4.8a1.8,1.8,0,0,0,.7-.5l.7-.4a3.5,3.5,0,0,0,1.1-1,3.2,3.2,0,0,0,.3-1.4,1.4,1.4,0,0,0-.2-.6,3.4,3.4,0,0,0-.3-2.4,3.2,3.2,0,0,0-2.1-1.5H13.1a4.7,4.7,0,0,0-1.6.4,2,2,0,0,0-.9.9l-.4.6v.4a6.1,6.1,0,0,0-.5,1.2,4.3,4.3,0,0,0,0,1.6,3.5,3.5,0,0,0,.5,2l.7.6a3.3,3.3,0,0,0,1.7.7A3,3,0,0,0,14.1,11.2ZM22.7,7l.6.2h.3A2.3,2.3,0,0,0,25,6.8l.4-.3.6-.3a7.5,7.5,0,0,0,1.5-.9,4.2,4.2,0,0,0,.8-1.2,1.9,1.9,0,0,0,.1-1.5A2.6,2.6,0,0,0,27.5,1,3.5,3.5,0,0,0,23.6.3a3.8,3.8,0,0,0-2,1.5,4.8,4.8,0,0,0-.7,2,3.6,3.6,0,0,0,.9,2.6ZM31,24.1a13.5,13.5,0,0,0-2.2-4.7,36.6,36.6,0,0,0-3.2-3.9,5.3,5.3,0,0,0-5-1.9,10.5,10.5,0,0,0-4.5,2.2A5.6,5.6,0,0,0,13.5,20a15.1,15.1,0,0,0,1.2,6.3c.8,2,1.7,4,2.6,5.9a1.6,1.6,0,0,0,1.5.8,1.7,1.7,0,0,0,1.9.9,17.1,17.1,0,0,0,8.7-4.8,8.2,8.2,0,0,0,1.7-2C31.6,26.3,31.3,25,31,24.1Z",fill:"#ef97b0"})})]}),Object(kt.jsxs)("g",{id:"head",children:[Object(kt.jsxs)("g",{id:"head__outline",children:[Object(kt.jsx)("path",{d:"M303.2,186.3c4-7,14.8-20.2,20-26,17-19,34.6-34.9,43-41l12-8s16.6-32,21-33c9-2,33,22,33,22s20-9,79,7c41,11.1,47,14,57,22,7.5,6,18,16,18,16s33.7-19.5,41-15-2,66-2,66,5.9,12.9,11,22c9.1,16.2,13.6,20.2,19,31,3.6,7.2,8.4,28.5,10.5,43.5l-385-62Z",fill:"#fff"}),Object(kt.jsx)("path",{d:"M302.9,186.9c-1.2,3-5.9,12.6-9,18.8l-12.5,25.5-.6-1.2c32.2,4.8,64.4,9.2,96.6,13.6s64.4,8.9,96.5,13.7,64.3,9.7,96.4,14.9,64.1,10.5,96.2,15.8l-5.6,5.5c-1.2-8.5-2.8-17.1-4.8-25.6-1-4.1-2.1-8.4-3.4-12.3l-.5-1.4-.5-1.4-.6-1.3-.7-1.3a59.5,59.5,0,0,0-3.1-5.5c-2.2-3.6-4.7-7.2-7.1-11s-4.8-7.6-7-11.5c-4.5-7.9-8.3-15.9-12.1-24a4,4,0,0,1-.3-2.6h0c1.4-9.1,2.7-18.2,3.7-27.4.5-4.5.9-9.1,1.2-13.7s.4-9.1.2-13.4a26.4,26.4,0,0,0-.8-6,8.1,8.1,0,0,0-.3-1.1c-.1-.3-.2-.4-.1-.3h.3c0,.1.1.1,0,.1h-.6a11.9,11.9,0,0,0-2.5.2,16.3,16.3,0,0,0-3,.7,56.7,56.7,0,0,0-6.2,2.1,212.6,212.6,0,0,0-24.5,11.9h-.1a3.9,3.9,0,0,1-4.7-.6c-4.9-4.7-10-9.4-15.1-13.8a86.6,86.6,0,0,0-7.9-6,46.1,46.1,0,0,0-8.5-4.6c-6-2.6-12.6-4.6-19.2-6.7l-19.8-5.7a324.9,324.9,0,0,0-40-8.9,196.8,196.8,0,0,0-20.2-1.8c-1.7,0-3.4-.1-5.1,0h-2.5l-2.5.2-2.5.2-2.4.4-2.4.5-1.1.3h-.5l-.4.2H433a2.5,2.5,0,0,1-2.6-.7c-4.6-4.6-9.5-9.1-14.5-13.2a82.7,82.7,0,0,0-7.9-5.7L403.9,81a10.8,10.8,0,0,0-4-.9c-.1,0-.3,0-.3.1h0l-.7.5-1.5,1.7c-1,1.2-2,2.6-2.9,3.9s-3.6,5.5-5.3,8.3c-3.5,5.7-6.8,11.4-9.9,17.3h0l-.4.4-10.2,6.6a53.6,53.6,0,0,0-4.9,3.4l-4.6,3.8c-6.2,5.1-12.1,10.6-17.9,16.2s-11.3,11.4-16.7,17.4c-2.7,3-5.3,6.1-7.8,9.2s-5,6.3-7.4,9.5c-4.2,5.6-7,10-5.7,7.1a34.1,34.1,0,0,1,2.1-3.8l3.8-5.6c2.9-4,6.3-8.3,8.5-10.9s4.4-5.2,6.7-7.7l6.9-7.4c4.7-4.9,9.4-9.7,14.3-14.3s9.8-9.3,15-13.7l4-3.2,4.2-2.9,8.3-5.7-.4.4c3-5.9,6.1-11.8,9.4-17.7,1.6-2.9,3.3-5.8,5.1-8.6l2.9-4.3,1.8-2a7.5,7.5,0,0,1,1.3-1.1c.1-.2.6-.4,1-.5l.9-.2h1.7l1.4.2,2.7.8c1.7.7,3.3,1.5,4.8,2.3a84,84,0,0,1,8.5,5.7A175.7,175.7,0,0,1,434,98.5l-2.9-.6.8-.3.7-.2L434,97l2.7-.7,2.7-.5a23,23,0,0,1,2.6-.3l2.7-.3,2.7-.2h5.3a182.1,182.1,0,0,1,21,1.3,332.5,332.5,0,0,1,41.1,8.4l20,5.5c6.7,2,13.4,4,20.1,6.7a65.3,65.3,0,0,1,9.8,5.1c3.1,2.1,5.9,4.3,8.6,6.5,5.4,4.5,10.6,9.2,15.7,14l-4.8-.6c4.1-2.4,8.2-4.6,12.4-6.7s8.6-4.2,13-6c2.3-.9,4.6-1.7,7-2.4a23.4,23.4,0,0,1,3.8-.9,20,20,0,0,1,4.4-.4h1.3l1.5.4a5.1,5.1,0,0,1,1.7.7l.9.7.8.7a8.3,8.3,0,0,1,1.6,2.6,12.7,12.7,0,0,1,.8,2.3,44.6,44.6,0,0,1,1.1,7.7c.2,5,.1,9.7-.1,14.4s-.7,9.5-1.2,14.1c-.9,9.4-2.1,18.6-3.6,27.9l-.3-2.6c3.7,7.9,7.5,15.8,11.8,23.3,2.1,3.7,4.4,7.4,6.8,11s4.9,7.2,7.3,11.1c1.3,2,2.4,4,3.5,6.1a10.9,10.9,0,0,0,.8,1.5l.8,1.8.7,1.7.6,1.7c1.5,4.4,2.6,8.7,3.7,13.1a262,262,0,0,1,5.2,26.4,4.9,4.9,0,0,1-4.1,5.6h-1.5c-32.1-5-64.2-9.9-96.3-15.1s-64.1-10.6-96.1-16.1-64-11.4-96-17.4-63.9-11.9-95.9-17.4h-.1a.8.8,0,0,1-.6-.9v-.2l16.6-32.1C299.8,192.2,304.1,183.9,302.9,186.9Z"})]}),Object(kt.jsxs)("g",{id:"head__face",children:[Object(kt.jsxs)("g",{id:"eyes",children:[Object(kt.jsx)("use",{width:"19.2",height:"18.7",transform:"translate(474.8 195.2)",xlinkHref:"#eye"}),Object(kt.jsx)("use",{width:"19.2",height:"18.7",transform:"matrix(-0.51, -0.85, 0.82, -0.5, 370.39, 192.59)",xlinkHref:"#eye"})]}),Object(kt.jsxs)("g",{id:"mouth",children:[Object(kt.jsx)("path",{d:"M399.2,186.3c.9,3.6,2.6,7.8,6,9,6.4,2.3,19-6,19-6s4.1,12.4,10,15,10.7-1.7,16-6",fill:"#fff"}),Object(kt.jsx)("path",{d:"M450.2,198.3c.6,1.2.2,1.9-.2,2.2a36.7,36.7,0,0,1-7.6,4.9,14.9,14.9,0,0,1-4.8,1.4h-1.4l-1.3-.2-1.4-.4-1.3-.6a21.6,21.6,0,0,1-6.4-7.2,52.8,52.8,0,0,1-4-8.3l3.8,1.3a62.3,62.3,0,0,1-7.1,4.1,32.1,32.1,0,0,1-7.9,2.8,13.2,13.2,0,0,1-4.9.2l-1.4-.3a7.5,7.5,0,0,1-1.3-.6,7.9,7.9,0,0,1-2.3-1.6,16.8,16.8,0,0,1-2.9-4,24.1,24.1,0,0,1-1.6-4.2c-.1-.5,1.6-1.3,3-1.4s3.5.2,3.6.6a10.3,10.3,0,0,0,2.6,4.9l.7.5h2.4l1.5-.2a28.4,28.4,0,0,0,6.5-2c2.1-1,4.3-2.1,6.3-3.3h.1a2.5,2.5,0,0,1,3.4.9l.3.5a43.1,43.1,0,0,0,3.2,7.7,19.8,19.8,0,0,0,2.2,3.4,8.1,8.1,0,0,0,2.6,2.6,5,5,0,0,0,3,.7,10.8,10.8,0,0,0,3.7-1,33.4,33.4,0,0,0,7.2-4.3C448.8,197.4,449.5,197.2,450.2,198.3Z"})]})]})]}),Object(kt.jsxs)("g",{id:"table",children:[Object(kt.jsx)("path",{d:"M65.7,181.8l714,124c0,74-2,54-2,128l-673-161Z",fill:"#fff"}),Object(kt.jsx)("path",{d:"M786.7,304.2c-2.7,1.2-10.8,0-16.1-.9L31.1,176.4c-5.2-.9-8.9-3.8-6.2-5s14.3-1.4,19.5-.5L777.1,300.6C782.3,301.6,789.4,303.1,786.7,304.2Z"})]}),Object(kt.jsxs)("g",{id:"laptop",children:[Object(kt.jsxs)("g",{id:"laptop__base",children:[Object(kt.jsx)("polygon",{points:"641.9 304.1 454.7 348.2 103.8 271.3 254.6 230.3 641.9 304.1",fill:"#f2f2f2"}),Object(kt.jsx)("path",{d:"M641.9,304.1c1.5-.1-2.3,1.5-10.3,3.6-28.9,7.5-58.1,15.2-87.7,22.6s-59.1,14.5-88.4,21.3l-.8.2-.8-.2-349.5-78-1.1-.2-8.7-1.9,8.6-2.3,150.6-41.5.6-.2h.7c62.5,11.7,125.5,23.6,188.4,35.9s125.6,25.1,188,37.6c8,1.6,11.9,3,10.4,3a185.6,185.6,0,0,1-18.4-2.6c-61.9-11.2-123.6-22.2-185-33.5s-122.7-23.1-184.4-35h1.2L104.4,273.4h-.1v-4.3l351.2,75.7h-1.5c28.3-6.7,56.3-13.3,84.3-19.5s56.5-12,85.2-18.1C631.3,305.6,640.4,304.1,641.9,304.1Z",fill:"#231f20"})]}),Object(kt.jsxs)("g",{id:"laptop__keyboard",children:[Object(kt.jsx)("polygon",{points:"371.1 274.8 256.8 253.5 257 252.7 266.2 251.1 382.4 271.5 382.3 272.3 371.1 274.8",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"237.4 265.6 221.3 262.4 221.4 261.7 230.2 260.2 246.8 262.6 246.6 263.4 237.4 265.6",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"474.6 312.9 249.9 268.1 250.1 267.3 259.2 265.8 487.7 309.6 487.5 310.5 474.6 312.9",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"411.8 309.4 204.2 266.7 204.4 266 212.9 264.5 423.9 306.3 423.7 307.2 411.8 309.4",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"450 317.3 428.5 312.9 428.8 312 440.7 310.6 462.7 314.1 462.5 315 450 317.3",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"201.6 273.9 187.5 270.9 187.7 270.2 196 268.7 210.4 271 210.3 271.7 201.6 273.9",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"222.6 278.3 208.1 275.3 208.3 274.5 216.9 273.1 231.8 275.4 231.6 276.2 222.6 278.3",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"362.9 308.1 231.5 280.2 231.7 279.5 240.7 278.1 374.2 305.1 374 305.9 362.9 308.1",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"444.3 288.4 385.2 277.4 385.4 276.5 396.6 274.9 456.9 285.1 456.7 285.9 444.3 288.4",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"526.1 303.6 460.1 291.3 460.3 290.4 472.8 288.9 540.1 300.2 539.9 301.1 526.1 303.6",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"426.2 321.6 376.1 310.9 376.3 310.1 387.4 308.7 438.5 318.5 438.3 319.4 426.2 321.6",fill:"#3e3e54"}),Object(kt.jsxs)("g",{children:[Object(kt.jsx)("polygon",{points:"410.6 286.5 399.1 288 398.9 288.8 499.9 308.3 513.3 305.9 513.5 305 410.6 286.5",fill:"#3e3e54"}),Object(kt.jsx)("polygon",{points:"395.7 283.7 395.9 282.8 248.2 255.7 239.2 257.3 239 258 384.3 286 395.7 283.7",fill:"#3e3e54"})]}),Object(kt.jsx)("polygon",{points:"371.3 273.9 256.9 252.7 266.4 250.3 382.4 271.5 371.3 273.9",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"237.6 264.9 221.4 261.7 230.4 259.4 246.8 262.6 237.6 264.9",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"474.8 312 250 267.3 259.4 265.1 487.7 309.6 474.8 312",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"412 308.5 204.4 266 213.1 263.8 423.9 306.3 412 308.5",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"450.2 316.4 428.8 312 440.9 309.7 462.8 314.1 450.2 316.4",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"201.7 273.1 187.7 270.2 196.2 268 210.4 271 201.7 273.1",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"222.8 277.6 208.3 274.5 217.1 272.4 231.8 275.4 222.8 277.6",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"363.1 307.3 231.7 279.5 240.9 277.3 374.2 305.1 363.1 307.3",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"444.6 287.5 385.4 276.5 396.8 274.1 456.9 285 444.6 287.5",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"526.3 302.7 460.3 290.4 473 288 540.1 300.2 526.3 302.7",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"426.4 320.7 376.3 310.1 387.6 307.9 438.5 318.5 426.4 320.7",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsxs)("g",{children:[Object(kt.jsx)("polygon",{points:"410.7 285.6 399.1 288 500.1 307.4 513.5 305 410.7 285.6",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"}),Object(kt.jsx)("polygon",{points:"395.9 282.8 248.4 255 239.2 257.3 384.5 285.2 395.9 282.8",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"})]})]}),Object(kt.jsxs)("g",{id:"paw-right",children:[Object(kt.jsxs)("g",{id:"paw-right--down",children:[Object(kt.jsx)("path",{d:"M293.2,191.3l10-7s-18.4,11.1-24,20-13,20.4-9,31c4.7,12.4,20.5,15.7,22,16,20,3.8,47.8-24.3,47.8-24.3s1.9-3.3,2.2-3.7",fill:"#fff"}),Object(kt.jsx)("path",{d:"M342.1,223.4c.9,1.2.2,2.8-.3,3.7l-.4.7-.3.3a118.1,118.1,0,0,1-14.2,12.3,83.2,83.2,0,0,1-16.2,9.8,43.9,43.9,0,0,1-9.3,3,26.3,26.3,0,0,1-10.1.2,44.5,44.5,0,0,1-9.3-3.2,34.2,34.2,0,0,1-8.3-5.5,23,23,0,0,1-5.8-8.5,21.3,21.3,0,0,1-1.3-10.3,34.9,34.9,0,0,1,2.7-9.7,76.1,76.1,0,0,1,4.5-8.5l2.4-4,.6-1,.8-1.1a15.6,15.6,0,0,1,1.6-2,49.9,49.9,0,0,1,7-6.8,136.1,136.1,0,0,1,15.3-11.2,3.1,3.1,0,0,1,4.4,1,3,3,0,0,1-.8,4.2H305l-8.6,6.2c-.9.6-2.7-.5-3.1-1.9s.5-4.4,1.5-5l6.6-4.5,3.5,5.3A131.9,131.9,0,0,0,290,197.4a52.7,52.7,0,0,0-6.4,6,6.5,6.5,0,0,0-1.3,1.6l-.6.8-.7,1-2.4,3.8c-1.6,2.6-3.1,5.2-4.4,7.8a27.7,27.7,0,0,0-2.4,8.1,15.6,15.6,0,0,0,.8,8,17.4,17.4,0,0,0,4.4,6.7,27.2,27.2,0,0,0,7.1,4.9,39.5,39.5,0,0,0,8.1,3,21.6,21.6,0,0,0,8.4,0,37.8,37.8,0,0,0,8.5-2.6,84.9,84.9,0,0,0,15.7-9,142.4,142.4,0,0,0,14.1-11.6l-.3.3,1.1-1.8C340.3,223.4,341.3,222.2,342.1,223.4Z"})]}),Object(kt.jsxs)("g",{id:"paw-right--up",children:[Object(kt.jsxs)("g",{children:[Object(kt.jsx)("path",{d:"M282.2,215.2c-1.6-1.6-12.8-17.9-14-34.3-.1-2.5,1.7-16,12.9-22.4s22.3-1.9,26.2.4c12.2,7.3,21.2,19.1,22.8,22.4",fill:"#fff"}),Object(kt.jsx)("path",{d:"M330,181.2a2.4,2.4,0,0,1-2.6-1.3,71.4,71.4,0,0,0-9.8-10.8,64,64,0,0,0-11.7-8.6,26.3,26.3,0,0,0-6.5-2.3,26.9,26.9,0,0,0-6.9-.6,24.9,24.9,0,0,0-6.7,1.3,20.8,20.8,0,0,0-5.8,3.3,23.1,23.1,0,0,0-7.6,11,32.5,32.5,0,0,0-1.4,6.6,6.6,6.6,0,0,0,.1,1.4l.2,1.8c.1,1.2.4,2.3.6,3.5a65,65,0,0,0,4.8,13.4c1,2.2,2.2,4.3,3.4,6.4a43.1,43.1,0,0,0,3.9,5.9.6.6,0,0,1,0,.6c0,.2-.2.4-.4.7a5.7,5.7,0,0,1-1.5,1.6c-1.3.6-4.1.1-4.6-.6a89.5,89.5,0,0,1-7.2-13.7,63.7,63.7,0,0,1-4.3-14.9,25.7,25.7,0,0,1-.5-4c0-.3-.1-.6-.1-1v-1.2a12.5,12.5,0,0,1,.2-2.1,35.2,35.2,0,0,1,2.4-7.8,28.6,28.6,0,0,1,4.1-6.9,24.6,24.6,0,0,1,6.1-5.5,26.2,26.2,0,0,1,15.5-4.2,28.9,28.9,0,0,1,7.8,1.2l3.8,1.3,1.8.9,1.8,1a78.2,78.2,0,0,1,11.9,9.6,80.2,80.2,0,0,1,9.7,11.8C331.1,179.7,331.4,181,330,181.2Z"})]}),Object(kt.jsx)("use",{width:"31.4",height:"33.93",transform:"translate(273.2 166.1) rotate(-5.6)",xlinkHref:"#paw-pads"})]})]}),Object(kt.jsxs)("g",{id:"laptop__terminal",children:[Object(kt.jsx)("path",{d:"M316.9,238.7,153.5,205.2a5.1,5.1,0,0,1-4-3.5L109.8,75.4c-1-3.3,1.9-6.6,5.6-6.3L277.9,84.5a5.2,5.2,0,0,1,4.6,3.7l40.7,144.4C324.2,236.2,320.8,239.5,316.9,238.7Z"}),Object(kt.jsx)("path",{d:"M317.3,238.7a7.9,7.9,0,0,0,2.2-.7,5,5,0,0,0,2.2-1.9,3.7,3.7,0,0,0,.6-2.9l-.3-.8-.2-.9a15.4,15.4,0,0,1-.5-1.7L300,154.6l-10.7-37.5L284,98.3l-2.6-9.4a7.9,7.9,0,0,0-.4-.9,4.3,4.3,0,0,0-.4-.7,3.3,3.3,0,0,0-1.5-1.1l-.9-.3h-1.1l-2.4-.2L119.2,71.2l-2.4-.3h-2.2a3.3,3.3,0,0,0-2.8,1.6,2.4,2.4,0,0,0-.5,1.4v.8c.1.1.1.2.1.4l.2.6,1.5,4.6L119,98.8l11.8,37.3,11.7,37.2,5.9,18.6,2.9,9.3a3.4,3.4,0,0,0,2.2,2h1l1.2.3,2.4.4,153,31.1c4.3.9,7.4,2.9,5.2,3.3s-11.7-.1-16-1l-75.8-15.7L186.6,214l-19-3.9-9.5-2-4.7-1h-.7l-.8-.3a6.1,6.1,0,0,1-1.4-.7,7.6,7.6,0,0,1-2.3-2.4l-.4-.8a1.9,1.9,0,0,1-.2-.7l-.4-1.2-.7-2.3-1.4-4.6-2.9-9.2-5.8-18.5-11.5-36.9-11.5-37-2.9-9.2L109,78.5l-.7-2.3v-.6c0-.3-.1-.6-.1-.8a4.8,4.8,0,0,1,0-1.7,6.8,6.8,0,0,1,3.8-5,10.1,10.1,0,0,1,3-.7h2.6l9.6,1L204.1,76l38.5,3.7,19.3,1.9,9.6.9,4.8.5h2.6a6.6,6.6,0,0,1,2.7,1.2,7.2,7.2,0,0,1,1.9,2.4,12.1,12.1,0,0,1,.5,1.4l.3,1.1,1.3,4.7,2.6,9.3,5.2,18.6,10.4,37.3,10.4,37.3,5.3,18.6,2.6,9.4,1.3,4.6.6,2.4a7,7,0,0,1,.4,2.7,5.7,5.7,0,0,1-1.8,3.7,5.9,5.9,0,0,1-3.4,1.6,3.5,3.5,0,0,1-2.1-.4C316.7,239,316.8,238.9,317.3,238.7Z"})]}),Object(kt.jsx)("g",{id:"laptop__terminal_code_scene",children:Object(kt.jsx)("g",{id:"laptop__code",children:Object(kt.jsxs)("g",{stroke:"#3DE0E8",strokeWidth:"6",transform:"matrix(-1 0 0 1 278 103)",children:[Object(kt.jsxs)("g",{id:"f3",transform:"translate(0 76)",children:[Object(kt.jsx)("path",{className:"typing-animation",id:"f3-l9",d:"M8,25L8,25",strokeDasharray:"60,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f3-l8",d:"M8,13L8,13",strokeDasharray:"50,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f3-l7",d:"M0,1L0,1",strokeDasharray:"25,10"})]}),Object(kt.jsxs)("g",{id:"f2",transform:"translate(0 38)",children:[Object(kt.jsx)("path",{className:"typing-animation",id:"f2-l6",d:"M8,25L8,25",strokeDasharray:"40,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f2-l5",d:"M8,13L8,13",strokeDasharray:"60,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f2-l4",d:"M0,1L0,1",strokeDasharray:"30,10"})]}),Object(kt.jsxs)("g",{id:"f1",children:[Object(kt.jsx)("path",{className:"typing-animation",id:"f1-l3",d:"M8,25L8,25",strokeDasharray:"60,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f1-l2",d:"M8,13L8,13",strokeDasharray:"60,10"}),Object(kt.jsx)("path",{className:"typing-animation",id:"f1-l1",d:"M0,1L0,1",strokeDasharray:"60,10"})]})]})})}),Object(kt.jsxs)("g",{id:"laptop__cover",style:{mixBlendMode:"hardLight"},children:[Object(kt.jsx)("polygon",{points:"440.7 347.2 90.3 275.6 4.7 3.8 353 36.7 440.7 347.2",fill:"#f2f2f2"}),Object(kt.jsx)("path",{d:"M440.4,346.4c-2.5-5.3-6.5-18.8-9-27.4L390.7,178c-13.6-46.8-26.9-93.7-40.3-140.6l2.3,2L4.4,7.1,7.9,2.8,94,274.5l-2.9-2.6q83.7,16.8,166.8,34.2t166.8,35.4c8.8,1.9,17.5,5.1,14.7,5.5s-6.3-.2-12-.9-12.3-1.5-16.8-2.3Q330.5,328.1,250,312.1c-53.5-10.8-107.1-21.7-160.4-32.7l-2.3-.5-.6-2.1L1.5,4.8,0,0,5,.5,353.3,34l1.8.2.5,1.8q20.7,73.8,41.2,147.8l40.6,147.5C439.8,340.1,442.9,351.7,440.4,346.4Z"})]})]}),Object(kt.jsxs)("g",{id:"paw-left",children:[Object(kt.jsxs)("g",{id:"paw-left--up",children:[Object(kt.jsxs)("g",{children:[Object(kt.jsx)("path",{d:"M545.4,261.9c-7.1-13-12.9-31.1-13.3-37.6-.6-9,0-15.6,5.2-22.2s15-9.8,22.7-8.8a26.7,26.7,0,0,1,17.3,9.4c5.3,5.8,9.4,12.9,11.6,16.6",fill:"#fff"}),Object(kt.jsx)("path",{d:"M588.9,219.2c-1.4.4-2.3-.7-2.8-1.4a93.9,93.9,0,0,0-8.9-12.5c-3.3-3.9-7.1-7-11.7-8.6a24.2,24.2,0,0,0-7.1-1.4,24.5,24.5,0,0,0-7.1.7,27,27,0,0,0-6.6,2.7,21,21,0,0,0-5.2,4.6,20.6,20.6,0,0,0-3.5,6.1,22.2,22.2,0,0,0-1.3,6.9,47.3,47.3,0,0,0,.1,7.5,52.2,52.2,0,0,0,1.4,7.1c1.4,4.8,3.1,9.7,5,14.4a147.7,147.7,0,0,0,6.5,13.9c.4.7-1,2.3-2.4,2.6s-4-.6-4.4-1.4c-2.3-4.8-4.3-9.7-6.1-14.6a128.8,128.8,0,0,1-4.6-15.3c-.3-1.3-.5-2.6-.7-4a16.4,16.4,0,0,1-.2-2.2v-2a57,57,0,0,1,.4-8.2,27.2,27.2,0,0,1,2.3-8.2c.7-1.3,1.4-2.5,2.2-3.7l1.3-1.7,1.4-1.6a28.8,28.8,0,0,1,7-5,27.6,27.6,0,0,1,8-2.5,25.6,25.6,0,0,1,8.3-.2,27.4,27.4,0,0,1,15.1,6.7,50.6,50.6,0,0,1,5.5,5.9,111.3,111.3,0,0,1,8.7,13.2C589.8,217.7,590.3,218.9,588.9,219.2Z"})]}),Object(kt.jsx)("use",{width:"31.4",height:"33.93",transform:"matrix(0.99, -0.03, 0.04, 1, 539.85, 203.52)",xlinkHref:"#paw-pads"})]}),Object(kt.jsxs)("g",{id:"paw-left--down",children:[Object(kt.jsx)("path",{d:"M538.2,239.3c-3.2,1.6-33,10.8-37,28-.4,1.8-2.1,18.9,7,26,5.5,4.3,12.7,2.8,25,0,10.3-2.3,19-5.8,40-16,9.1-4.4,16.6-8.2,22-11",fill:"#fff"}),Object(kt.jsx)("path",{d:"M595.1,266.4c.1,1.4-1.4,2.4-2.4,2.9l-18.3,9.4c-6.2,3.1-12.3,6.1-18.6,9a120.8,120.8,0,0,1-19.6,7.2l-5.1,1.2-5.1,1.1a43.4,43.4,0,0,1-5.2.9,33.8,33.8,0,0,1-5.6.3,17.8,17.8,0,0,1-5.8-1.5,6.1,6.1,0,0,1-1.4-.7l-1.3-.9-2.2-2a23.6,23.6,0,0,1-5.2-10.2,44.5,44.5,0,0,1-1.3-10.9c0-.9.1-1.8.1-2.7a6.6,6.6,0,0,0,.1-1.4v-.7c.1-.3.1-.7.2-.9a21.6,21.6,0,0,1,2.1-5.5,33.4,33.4,0,0,1,7.1-8.7,67.1,67.1,0,0,1,8.7-6.4,121.7,121.7,0,0,1,19-9,1.5,1.5,0,0,1,1.7.6,3.4,3.4,0,0,1,.9,1.9c.1,1.5-1.6,4.2-2.6,4.6a91.1,91.1,0,0,0-17.8,8.5,40.1,40.1,0,0,0-7.6,5.8,22.8,22.8,0,0,0-5.2,7.3l-.4,1-.3,1a1.7,1.7,0,0,0-.2.5v.4c-.1.4-.1.8-.2,1.2s-.1,3.1-.1,4.7a35.4,35.4,0,0,0,1.4,9.3,15.6,15.6,0,0,0,4.5,7.3c2,1.9,4.7,2.6,7.8,2.5a55.9,55.9,0,0,0,9.7-1.2l4.9-1.1,4.9-1.1a121,121,0,0,0,18.8-6.8c12.4-5.3,24.6-11.5,36.8-17.4C593.4,265.4,595,264.9,595.1,266.4Z"})]})]})]})})})})}var Ss=n.a.memo(_s);i(262);function vs(){var e=Object(s.useContext)(Mt),t=(e.state,e.actions),i=Object(bs.a)(),n=i.register,c=i.handleSubmit,o=(i.watch,i.formState.errors);return Object(kt.jsx)("div",{className:"login",children:Object(kt.jsxs)("div",{className:"box",children:[Object(kt.jsx)(Ss,{}),Object(kt.jsx)("div",{className:"info",children:Object(kt.jsx)("h2",{children:"\ub85c\uadf8\uc778"})}),Object(kt.jsxs)("form",{onSubmit:c((function(e){o.email&&o.password?t.viewActions.getToast("\uc544\uc774\ub514\ub098 \ube44\ubc00\ubc88\ud638\uac00 \ud2c0\ub838\uc5b4\uc694"):t.generalActions.WebsocketSendData(ke(e.email,e.password))})),children:[Object(kt.jsx)("input",Object(u.a)({autoComplete:"username",type:"email",placeholder:"\uc774\uba54\uc77c",className:"input_common"},n("email",{required:!0}))),Object(kt.jsx)("input",Object(u.a)({autoComplete:"current-password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",className:"input_common"},n("password",{required:!0}))),Object(kt.jsx)("button",{type:"submit",value:"submit",children:"\ub85c\uadf8\uc778"})]})]})})}var xs=n.a.memo(vs),ws=i(90),Es=i.n(ws),Ns=i(186),ys=i.n(Ns);function Ts(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=t.generalStates.REPLY,c=t.generalStates.MENTION,o=Object(s.useCallback)((function(e){i.viewActions.selecTopic(e.topic_id)}),[]),r=function(){return n.length?n.map((function(e,t){return Object(kt.jsxs)("a",{href:"#reply_".concat(e.topic_id,"_").concat(e.sequence_id),className:"msgbox",onClick:function(){return o(e)},children:[Object(kt.jsxs)("div",{className:"left",children:[Object(kt.jsx)(Es.a,{}),Object(kt.jsx)("p",{children:"\ub2f5\uc7a5"})]}),Object(kt.jsxs)("div",{className:"right",children:[Object(kt.jsxs)("p",{children:[e.topic_id,"\ubc88\ubc29"]}),Object(kt.jsxs)("span",{children:[e.from_user_name,"\ub2d8\uc774 \ub2f5\uc7a5 \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0c8\uc5b4\uc694."]})]})]},t)})):Object(kt.jsx)("p",{children:"\uc0c8\ub85c\uc6b4 \ub2f5\uc7a5\uc774 \uc5c6\uc5b4\uc694"})},a=function(){return c.length?c.map((function(e,t){return Object(kt.jsxs)("button",{className:"msgbox",children:[Object(kt.jsxs)("div",{className:"left",children:[Object(kt.jsx)(Yi.a,{}),Object(kt.jsx)("p",{children:"\uba58\uc158"})]}),Object(kt.jsxs)("div",{className:"right",children:[Object(kt.jsxs)("p",{children:[e.topic_id,"\ubc88\ubc29"]}),Object(kt.jsxs)("span",{children:[e.from_user_name,"\ub2d8\uc774 \uba58\uc158 \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0c8\uc5b4\uc694."]})]})]})})):Object(kt.jsx)("p",{children:"\uc0c8\ub85c\uc6b4 \uba58\uc158\uc774 \uc5c6\uc5b4\uc694"})},l=function(){return Object(kt.jsxs)("button",{className:"btnViewNotify",onClick:function(){return i.viewActions.isShowPopupNotify(!0)},children:[Object(kt.jsx)(ys.a,{}),n.length||c.length?Object(kt.jsxs)("span",{className:"bell_newmsg",children:[Object(kt.jsx)("span",{className:"dot"}),"\uc0c8\ub85c\uc6b4 \uc54c\ub9bc"]}):""]})};return Object(kt.jsxs)(kt.Fragment,{children:[!t.viewStates.isShowNotify&&Object(kt.jsx)(l,{}),!!t.viewStates.isShowNotify&&Object(kt.jsxs)("div",{className:"Notify",children:[Object(kt.jsxs)("h2",{children:["\uc54c\ub9bc",Object(kt.jsx)(gi.a,{className:"icon_close",onClick:function(){return i.viewActions.isShowPopupNotify(!1)}})]}),Object(kt.jsxs)("div",{className:"notify_reply",children:[Object(kt.jsx)("h3",{children:"\ub2f5\uc7a5"}),Object(kt.jsx)(r,{})]}),Object(kt.jsxs)("div",{className:"notify_mention",children:[Object(kt.jsx)("h3",{children:"\uba58\uc158"}),Object(kt.jsx)(a,{})]})]})]})}var Is=n.a.memo(Ts),As=i(60),Cs=(i(265),i(187)),Ls=i.n(Cs);function Rs(){var e=Object(s.useContext)(Mt),t=e.state,i=e.actions,n=Object(s.useState)(!1),c=Object(a.a)(n,2),o=c[0],r=c[1];return Object(s.useEffect)((function(){!function(){var e,t=window.navigator.userAgent,i=(e=t,[/iPhone/i,/iPad/i,/iPod/i,/Android/i,/BlackBerry/i,/Windows Phone/i].some((function(t){return e.match(t)}))),s=(new Ls.a).completeID();i?console.log("\uc0ac\uc6a9\uc790\uc811\uc18d\uc815\ubcf4 => (1) DEVICE: MOBILE, (2) AGENT: ".concat(t,", (3) browserId: ").concat(s," ")):console.log("\uc0ac\uc6a9\uc790\uc811\uc18d\uc815\ubcf4 => (1) DEVICE: PC, (2) AGENT: ".concat(t,", (3) browserId: ").concat(s," "))}()}),[]),Object(s.useEffect)((function(){}),[]),Object(s.useEffect)((function(){localStorage.getItem("chattingLoginKey")&&t.generalStates.WEBSOCKET_STATUS}),[t.generalStates.WEBSOCKET_STATUS]),Object(s.useEffect)((function(){if(!0===t.viewStates.hideSignup&&null!==t.generalStates.SESSION_USER_INFO.id&&null!==t.generalStates.SESSION_JWT_TOKEN){if(!t.viewStates.profileImg)return;console.log("\uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2dc\ub3c4");var e=new FormData;e.append("file",t.viewStates.profileImg),si()({method:"POST",url:t.generalStates.DEFAULT_CHAT_SERVER_URL+"/api/v1/upload/profile?user_id="+t.generalStates.SESSION_USER_INFO.id,headers:{Authorization:"Bearer "+t.generalStates.SESSION_JWT_TOKEN},data:e}).then((function(e){i.generalActions.UpdateProfile(t.generalStates.SESSION_USER_INFO.id,e.data.file.response.file.id),console.log("\uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc644\ub8cc")})).catch((function(e){console.log("\uc624\ub958 : \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"),i.generalActions.WebsocketSendData(De()),i.viewActions.isHideLogin(!1),localStorage.removeItem("chattingLoginKey")}))}}),[t.viewStates.hideSignup,t.generalStates.SESSION_USER_INFO,t.generalStates.SESSION_JWT_TOKEN]),Object(s.useEffect)((function(){var e=t.generalStates.FRIENDS_ALL.length-1,s=t.generalStates.FRIENDS_ALL[e];if(s){oi(s.profile.file_id,t.generalStates.DEFAULT_CHAT_SERVER_URL,t.generalStates.SESSION_JWT_TOKEN,(function(e){i.generalActions.addProfileImg(s.profile.file_id,s.id,e)}));var n=t.generalStates.TOPICS_MY.find((function(e){return e.id===t.viewStates.selectopicid}));void 0!==n&&void 0===n.users[n.users.length-1]&&i.generalActions.InsertNewUserById(n.id,s,n.users.length-1)}}),[t.generalStates.FRIENDS_ALL.length]),Object(s.useEffect)((function(){if(t.viewStates.selectopicid){i.viewActions.isShowChatboxLoading(!1),setTimeout((function(){i.viewActions.isShowChatboxLoading(!0)}),10),i.generalActions.WebsocketSendData(Fe(t.viewStates.selectopicid));var e=Qe(t.generalStates.SESSION_USER_INFO.id,t.viewStates.selectopicid);e.messages?(i.generalActions.InsertMessagesById(e),console.log("\ub85c\uceec\uc5d0 \uba54\uc2dc\uc9c0 \uc694\uccad")):(i.generalActions.WebsocketSendData(We(t.viewStates.selectopicid)),console.log("\uc11c\ubc84\uc5d0 \uba54\uc2dc\uc9c0 \uc694\uccad"))}}),[t.viewStates.selectopicid]),Object(s.useEffect)((function(){t.generalStates.SESSION_USER_INFO.id;var e=new Set,s=new Set;if(e.size>0){var n=Object(l.a)(e);i.viewActions.setReplyInfo(n)}else if(s.size>0){var c=Object(l.a)(s);i.viewActions.setMentionInfo(c)}}),[t.viewStates.selectopicid,t.generalStates.TOPICS_MY]),Object(s.useEffect)((function(){var e;e=t.viewStates.getToastMsg,Object(As.b)(e,{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),i.viewActions.getToast(null)}),[null!=t.viewStates.getToastMsg]),Object(kt.jsx)("div",{className:"ViewApp",children:Object(kt.jsxs)(Yt,{children:[!t.viewStates.hideSignup&&!t.viewStates.hideLogin&&Object(kt.jsx)(gs,{}),!t.viewStates.hideLogin&&Object(kt.jsx)(xs,{}),Object(kt.jsx)(Ft,{isShowNavi:o,setIsShowNavi:r}),Object(kt.jsx)(Xt,{isShowNavi:o,setIsShowNavi:r}),Object(kt.jsxs)(Vt,{children:[Object(kt.jsx)(xi,{}),Object(kt.jsx)(ms,{})]}),!!t.viewStates.hideSignup&&!!t.viewStates.hideLogin&&Object(kt.jsx)(Is,{}),Object(kt.jsx)(As.a,{})]})})}var ks=n.a.memo(Rs),Ms=n.a.createContext({handleWebsocketClose:function(){}});var Ds=function(){var e=function(){var e,t=n.a.useContext(Mt),i=t.state,c=t.actions,o=Ut()(i.generalStates.DEFAULT_WEBSOCKET_SERVER_URL,{shouldReconnect:function(e){return!0},reconnectAttempts:10,reconnectInterval:3e3}),a=o.sendMessage,l=o.lastMessage,u=o.readyState,d=o.getWebSocket,f=(e={},Object(r.a)(e,qt.ReadyState.CONNECTING,"Connecting"),Object(r.a)(e,qt.ReadyState.OPEN,"Open"),Object(r.a)(e,qt.ReadyState.CLOSING,"Closing"),Object(r.a)(e,qt.ReadyState.CLOSED,"Closed"),Object(r.a)(e,qt.ReadyState.UNINSTANTIATED,"Uninstantiated"),e)[u];Object(s.useEffect)((function(){null!==l&&c.generalActions.WebsocketReceiveData(l.data)}),[l]),Object(s.useEffect)((function(){"Open"===f?console.log("opened"):"Connecting"===f?console.log("connecting..."):"Closing"===f?console.log("closing..."):"Closed"===f?(console.log("closed"),c.viewActions.getToast("\uc11c\ubc84\uc5f0\uacb0\uc774 \ub04a\uacbc\uc5b4\uc694...\u315c\u315c  (websocket closed)")):console.log("uninstantiated")}),[f]),Object(s.useEffect)((function(){"Open"===f?c.generalActions.WebsocketUpdateWriter(a):c.generalActions.ResetAllStates(),c.generalActions.WebsocketUpdateStatus(f),c.generalActions.Logger(R,"[WEBSOCKET] STATUS CHANGED = "+f)}),[f]);var j=Object(s.useCallback)((function(){d().close()}),[]);return{sendMessage:a,lastMessage:l,readyState:u,getWebSocket:d,handleWebsocketClose:j}}().handleWebsocketClose,t=n.a.useMemo((function(){return{handleWebsocketClose:e}}),[e]);return Object(kt.jsx)(Ms.Provider,{value:t,children:Object(kt.jsx)(ks,{})})},qs=i(188);o.a.render(Object(kt.jsx)(qs.a,{fallback:Object(kt.jsx)("h1",{children:" \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc5b4\uc694... \uc5d0\ub7ec\uc5c6\ub294 \uc11c\ube44\uc2a4\ub85c \uc798 \ub9cc\ub4e4\uc5b4\ubcfc\uac8c\uc694 :( "}),errorHandler:function(e,t){var i="error: ".concat(e);console.log(i)},children:Object(kt.jsx)(Dt,{children:Object(kt.jsx)(Ds,{})})}),document.getElementById("root"))}},[[371,1,2]]]);
//# sourceMappingURL=main.4e0d891d.chunk.js.map